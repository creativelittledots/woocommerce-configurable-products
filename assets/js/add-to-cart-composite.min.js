var wc_cp_composite_scripts={};jQuery(document).ready(function(a){function b(b){var c=b.find(".attribute-options"),d=c.length,e="";return 0==d?"":(c.each(function(b){var c=a(this).find("select").val();return""===c?(e="",!1):(e=e+a(this).data("attribute_label")+": "+a(this).find("select option:selected").text(),void(b!==d-1&&(e+=", ")))}),e)}function c(a,b){var c=a.find(".summary_element_image img");if(0==c.length||c.hasClass("norefresh"))return!1;var d=c.attr("data-o_src");b?("undefined"==typeof d&&(d=c.attr("src")?c.attr("src"):"",c.attr("data-o_src",d)),c.attr("src",b)):"undefined"!=typeof d&&c.attr("src",d)}function d(a,b){return a.hasClass("animating")?!1:(a.hasClass("closed")?(b.slideDown({duration:200,queue:!1,always:function(){a.removeClass("animating")}}),a.removeClass("closed").addClass("open animating")):(b.slideUp({duration:200,queue:!1}),a.removeClass("open").addClass("closed")),!0)}function e(b){var c={};b.find(".variations select").each(function(){var b=a(this).val();c[a(this).attr("name")]=b});var d=b.data("product_variations"),e=f(d,c),g=e.shift();return g?!0:!1}function f(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];g(e.attributes,b)&&c.push(e)}return c}function g(a,b){var c=!0;for(var d in a){var e=a[d],f=b[d];void 0!==e&&void 0!==f&&0!=e.length&&0!=f.length&&e!=f&&(c=!1)}return c}function h(a){var b=wc_composite_params.currency_format_decimal_sep,c=wc_composite_params.currency_position,d=wc_composite_params.currency_symbol,e=wc_composite_params.currency_format_trim_zeros,f=wc_composite_params.currency_format_num_decimals;if("yes"==e&&f>0){for(var g=0;f>g;g++)b+="0";a=a.replace(b,"")}var h="";return"left"==c?h='<span class="amount">'+d+a+"</span>":"right"==c?h='<span class="amount">'+a+d+"</span>":"left_space"==c?h='<span class="amount">'+d+" "+a+"</span>":"right_space"==c&&(h='<span class="amount">'+a+" "+d+"</span>"),h}function i(a){var b=wc_composite_params.currency_format_num_decimals,c=wc_composite_params.currency_format_decimal_sep,d=wc_composite_params.currency_format_thousand_sep,e=a,f=isNaN(b=Math.abs(b))?2:b,g="undefined"==typeof c?",":c,h="undefined"==typeof d?".":d,i=0>e?"-":"",j=parseInt(e=Math.abs(+e||0).toFixed(f))+"",k=(k=j.length)>3?k%3:0;return i+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(e-j).toFixed(f).slice(2):"")}function j(a,b){var c=0,d=0,e=[];for(a.sort(),b.sort();c<a.length&&d<b.length;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}a("body").on("quick-view-displayed",function(){a(".composite_form .composite_data").each(function(){a(this).wc_composite_form()})}),a(window).resize(function(){a(".composite_form").each(function(){a(this).width()<=wc_composite_params.small_width_threshold?a(this).addClass("small_width"):a(this).removeClass("small_width"),a(this).width()>wc_composite_params.full_width_threshold?a(this).addClass("full_width"):a(this).removeClass("full_width"),wc_composite_params.legacy_width_threshold&&(a(this).width()<=wc_composite_params.legacy_width_threshold?a(this).addClass("legacy_width"):a(this).removeClass("legacy_width"))})}).trigger("resize"),a(".widget_composite_summary").on("click",".summary_element_link",function(){var b=a(this).closest(".composite_summary"),c=b.find(".widget_composite_summary_content").data("container_id"),d=a("#composite_data_"+c).closest(".composite_form");if(a(this).hasClass("disabled"))return!1;var e=wc_cp_composite_scripts[c];if(e.has_transition_lock)return!1;if("undefined"==typeof e)return!1;var f=a(this).closest(".summary_element").data("item_id");if("undefined"==typeof f){var g=b.find(".summary_element").index(a(this).closest(".summary_element"));f=d.find(".multistep.component:eq("+g+")").data("item_id")}var h=e.get_step(f);return h===!1?!1:(h.get_markup().hasClass("progressive")&&h.block_next_steps(),h.is_current()||h.show_step(),!1)}).on("click","a.summary_element_tap",function(){return a(this).closest(".summary_element_link").trigger("click"),!1});var k={};k="yes"===wc_composite_params.is_wc_version_gte_2_3?{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 )",opacity:.6}}:{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 ) url("+woocommerce_params.ajax_loader_url+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}},a.fn.wc_composite_form=function(){if(!a(this).hasClass("composite_data"))return!0;var f=a(this),g=a(this).data("container_id");if("undefined"!=typeof wc_cp_composite_scripts[g])return!0;var l=f.closest(".composite_form");wc_cp_composite_scripts[g]={$composite_data:f,$composite_form:l,$add_to_cart_button:l.find(".composite_add_to_cart_button"),$composite_navigation:l.find(".composite_navigation"),$composite_pagination:l.find(".composite_pagination"),$composite_summary:l.find(".composite_summary"),$composite_summary_widget:a(".widget_composite_summary"),$components:l.find(".component"),composite_id:g,composite_layout:f.data("bto_style"),composite_layout_variation:f.data("bto_style_variation"),composite_selection_mode:f.data("bto_selection_mode"),composite_stock_status:!1,actions_nesting:0,composite_components:{},composite_steps:{},composite_initialized:!1,has_update_lock:!1,has_ui_update_lock:!1,has_transition_lock:!1,has_update_nav_delay:!1,triggered_by_step:!1,active_scenarios:{},init:function(){this.bind_event_handlers(),this.init_components(),this.init_steps();var b=this,c=b.$composite_data;c.find(".composite_wrap p.stock").length>0&&(b.composite_stock_status=c.find(".composite_wrap p.stock").clone().wrap("<div>").parent().html());var d=c.find("#product-addons-total");c.find(".composite_price").after(d),c.find(".nyp").trigger("woocommerce-nyp-updated-item");var e=b.composite_layout,f=b.$composite_form;"progressive"===b.composite_layout&&b.$composite_form.find(".toggled:not(.active) .component_title").addClass("inactive"),c.trigger("wc-composite-initializing"),a.each(b.composite_components,function(a,b){b.init_scripts(),b.$self.trigger("wc-composite-component-loaded")}),f.css("visibility","visible");var g=b.get_current_step();"paged"===e||"progressive"===e?g.show_step():(g.set_active(),g.fire_scenario_actions()),b.composite_initialized=!0,b.update_composite(),this.$components.each(function(){a(this).trigger("wc-composite-component-options-loaded")}),c.trigger("wc-composite-initialized")},bind_event_handlers:function(){var b=this;this.$add_to_cart_button.on("click",function(){a.each(b.composite_components,function(b,c){var d=c.component_id;c.$self.find('.variations_form .variations .attribute-options select, .variations_form .component_wrap input[name="variation_id"]').each(function(){a(this).attr("name",a(this).attr("name")+"_"+d)}),c.$self.find("select, input").each(function(){a(this).prop("disabled",!1)})})}),this.$composite_data.on("woocommerce-nyp-updated-item",function(){var c=a(this).find(".nyp");if(c.length>0){var d=a(this).data("price_data");d.base_price=c.data("price"),d.price_undefined=!1,b.update_composite(!0)}}),this.$composite_navigation.on("click",".page_button",function(){if(b.has_transition_lock)return!1;if(a(this).hasClass("next"))if(b.get_next_step())b.show_next_step();else{var c=b.$composite_form.find(".scroll_final_step");if(c.length>0){var d=c.hasClass("scroll_bottom")?a(window).height()-80:80,e=a("html").scrollTop(),f="body";a("html").scrollTop(a("html").scrollTop()-1),e!=a("html").scrollTop()&&(f="html"),a(f).animate({scrollTop:c.offset().top-d},200)}}else b.show_previous_step();return!1}),this.$composite_pagination.on("click",".pagination_element a",function(){if(b.has_transition_lock)return!1;if(a(this).hasClass("inactive"))return!1;var c=a(this).closest(".pagination_element").data("item_id");return b.show_step(c),!1}),this.$composite_summary.on("click",".summary_element_link",function(){if(b.has_transition_lock)return!1;var c=b.$composite_form;if(a(this).hasClass("disabled"))return!1;var d=a(this).closest(".summary_element").data("item_id");if("undefined"==typeof d){var e=b.$composite_summary,f=e.find(".summary_element").index(a(this).closest(".summary_element"));d=c.find(".multistep.component:eq("+f+")").data("item_id")}var g=b.get_step(d);return g===!1?!1:(g.get_markup().hasClass("progressive")&&g.block_next_steps(),g.is_current()||g.show_step(),!1)}).on("click","a.summary_element_tap",function(){return a(this).closest(".summary_element_link").trigger("click"),!1})},init_components:function(){var b=this;b.$components.each(function(c){var d=a(this),e=d.attr("data-item_id");b.composite_components[c]={component_id:e,component_index:c,component_title:d.data("nav_title"),_is_optional:!1,$self:d,$component_summary:d.find(".component_summary"),$component_selections:d.find(".component_selections"),$component_content:d.find(".component_content"),$component_options:d.find(".component_options"),$component_options_inner:d.find(".component_options_inner"),$component_inner:d.find(".component_inner"),$component_pagination:d.find(".component_pagination"),$component_data:a(),get_selected_product_type:function(){return this.$component_data.data("product_type")},get_selected_product_id:function(){return this.$component_options.find("#component_options_"+this.component_id).val()},is_in_stock:function(){return this.$component_summary.find(".component_wrap .out-of-stock").length>0?!1:!0},init_scripts:function(a){if("undefined"==typeof a&&(a=!0),this.$component_data=this.$self.find(".component_data"),a){var b=this.get_selected_product_type(),c=this.$self.find(".component_summary > .content");"variable"===b?(c.hasClass("cart")||c.addClass("cart"),c.hasClass("variations_form")||c.addClass("variations_form"),this.get_step().fire_scenario_actions(),c.wc_variation_form(),c.find(".variations select").change()):"bundle"===b?(c.hasClass("bundle_form")||c.addClass("bundle_form"),c.find(".bundle_data").wc_pb_bundle_form()):c.hasClass("cart")||c.addClass("cart")}},get_step:function(){return b.get_step(this.component_id)},get_title:function(){return this.component_title},update_filters_ui:function(){var b=this.$self.find(".component_filters"),c=b.find(".component_filter"),d=!0;return 0==c.length?!1:(c.each(function(){0==a(this).find(".component_filter_option.selected").length?a(this).removeClass("active"):(a(this).addClass("active"),d=!1)}),void(d?b.removeClass("filtered"):b.addClass("filtered")))},get_active_filters:function(){var b=this.$self.find(".component_filters"),c={};return 0==b.length?c:(b.find(".component_filter_option.selected").each(function(){var b=a(this).closest(".component_filter").data("filter_type"),d=a(this).closest(".component_filter").data("filter_id"),e=a(this).data("option_id");b in c?d in c[b]?c[b][d].push(e):(c[b][d]=[],c[b][d].push(e)):(c[b]={},c[b][d]=[],c[b][d].push(e))}),c)},reload_component_options:function(c){var d=this,e=this.$self,f=this.$component_selections,g=this.$component_options,h=this.$component_options_inner,i=this.$component_pagination,j=g.outerHeight(),l=0,m=!1;if(e.hasClass("disabled"))return!1;var n=function(){window.setTimeout(function(){m?g.animate({height:l},{duration:200,queue:!1,always:function(){g.css({height:"auto"}),f.unblock().removeClass("blocked_content refresh_component_options")}}):f.unblock().removeClass("blocked_content refresh_component_options")},250)};f.addClass("blocked_content").block(k),window.setTimeout(function(){a.post(woocommerce_params.ajax_url,c,function(k){try{if("success"===k.result){f.addClass("refresh_component_options"),g.css("height",j);var o=g.find(".component_options_select").val();h.html(a(k.options_markup).find(".component_options_inner").html());var p=h.find("img"),q=function(){if(p.length>0){var b=!1;p.each(function(){var c=a(this);return 0===c.height()?(b=!0,!1):void 0}),b?window.setTimeout(function(){q()},100):r()}else r()},r=function(){k.pagination_markup?(i.html(a(k.pagination_markup).html()),i.slideDown(200)):i.slideUp(200);var f=b.$composite_data.data("scenario_data");f.scenario_data[c.component_id]=k.component_scenario_data;var p=g.find(".component_options_select").val();o>0&&(""===p||"undefined"==typeof p)?g.find(".component_options_select").change():(d.get_step().fire_scenario_actions(),d.get_step().trigger_ui_update()),e.trigger("wc-composite-component-options-loaded"),g.css("height","auto"),l=h.outerHeight(),Math.abs(l-j)>1&&(m=!0,g.css("height",j)),n()};q()}else g.css("height",j),h.html(k.options_markup)}catch(s){console.log(s),n()}},"json")},100)},is_optional:function(){return this._is_optional},set_optional:function(a){a&&!this._is_optional?this.$component_selections.find("option.none").html(wc_composite_params.i18n_none):!a&&this._is_optional&&this.$component_selections.find("option.none").html(wc_composite_params.i18n_select_an_option),this._is_optional=a},init_qty_input:function(){("no"===wc_composite_params.is_wc_version_gte_2_3||"yes"===wc_composite_params.show_quantity_buttons)&&this.$self.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />'),this.$self.find(".component_wrap input.qty").each(function(){var b=parseFloat(a(this).attr("min"));b>=0&&parseFloat(a(this).val())<b&&a(this).val(b)})}},b.bind_component_event_handlers(b.composite_components[c])})},bind_component_event_handlers:function(b){var c=this;b.$self.on("wc-composite-component-loaded",function(){a.isFunction(a.fn.prettyPhoto)&&a(this).find('a[data-rel^="prettyPhoto"]').prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})}).on("woocommerce-product-addons-update",function(){var b=a(this).find(".addon");return 0==b.length?!1:void c.update_composite(!0)}).on("woocommerce-nyp-updated-item",function(){var d=a(this).find(".cart .nyp");d.length>0&&"variable"!==b.get_selected_product_type()&&(b.$component_data.data("price",d.data("price")),b.$component_data.data("regular_price",d.data("price")),c.update_composite(!0))}).on("woocommerce_variation_select_change",function(){var d=b.$component_summary;c.$composite_data.find(".composite_wrap .composite_button .form_data_"+b.component_id+" .variation_input").remove(),c.$composite_data.find(".composite_wrap .composite_button .form_data_"+b.component_id+" .attribute_input").remove(),b.$component_data.data("component_set",!1),d.find(".composited_product_images").addClass("images"),a(this).find(".variations .attribute-options select").each(function(){if(""===a(this).val()){d.find('.component_wrap .single_variation input[name="variation_id"]').val("");var e=b.get_step();return c.triggered_by_step?(e=c.get_step(c.triggered_by_step),c.triggered_by_step=!1):e.fire_scenario_actions(),e.trigger_ui_update(),c.update_composite(),!1}})}).on("woocommerce_variation_select_focusin",function(){b.get_step().fire_scenario_actions(!0)}).on("reset_image",function(){var a=b.$component_summary;a.find(".composited_product_images").removeClass("images")}).on("found_variation",function(d,e){var f=b.$component_summary,g=c.$composite_data.find(".composite_wrap .composite_button .form_data_"+b.component_id),h='<input type="hidden" name="wccp_variation_id['+b.component_id+']" class="variation_input" value="'+e.variation_id+'"/>';g.append(h);for(var i in e.attributes){var j='<input type="hidden" name="wccp_'+i+"["+b.component_id+']" class="attribute_input" value="'+a(this).find('.variations .attribute-options select[name="'+i+'"]').val()+'"/>';g.append(j)}var k=c.$composite_data.data("price_data");1==k.per_product_pricing&&(b.$component_data.data("price",e.price),b.$component_data.data("regular_price",e.regular_price)),b.$component_data.data("component_set",!0),f.find(".composited_product_images").removeClass("images"),"yes"===e.is_sold_individually&&a(this).find(".component_wrap input.qty").val("1").change(),b.get_step().fire_scenario_actions(),b.get_step().trigger_ui_update(),c.update_composite()}).on("woocommerce-composited-product-update",function(){var a=c.$composite_data.data("price_data");if(b.get_step().trigger_ui_update(),1==a.per_product_pricing){var d=b.$component_data.data("price"),e=b.$component_data.data("regular_price");b.$component_data.data("price",d),b.$component_data.data("regular_price",e)}c.update_composite()}).on("click",".clear_component_options",function(){if(a(this).hasClass("reset_component_options"))return!1;var c=b.$component_options.find("select.component_options_select");return b.get_step().unblock_step_inputs(),b.$self.find(".component_option_thumbnails .selected").removeClass("selected"),c.val("").change(),!1}).on("click",".reset_component_options",function(){var a=b.get_step(),c=b.$component_options.find("select.component_options_select");return a.unblock_step_inputs(),b.$self.find(".component_option_thumbnails .selected").removeClass("selected"),a.set_active(),c.val("").change(),a.block_next_steps(),!1}).on("click",".block_component_selections_inner",function(){var a=b.get_step();return a.block_next_steps(),a.show_step(),!1}).on("click",".component_option_thumbnail",function(){var c=b.$self;if(c.hasClass("disabled")||a(this).hasClass("disabled"))return!0;if(a(this).blur(),!a(this).hasClass("selected")){var d=a(this).data("val");b.$component_options.find("select.component_options_select").val(d).change()}}).on("click","a.component_option_thumbnail_tap",function(){return a(this).closest(".component_option_thumbnail").trigger("click"),!1}).on("focusin touchstart",".component_options select.component_options_select",function(){b.get_step().fire_scenario_actions(!0)}).on("change",".component_options select.component_options_select",function(){var d=b.component_id,e=b.$self,f=b.get_step(),g=b.$component_selections,h=b.$component_content,i=b.$component_summary,j=e.find(".component_summary > .content"),l=c.$composite_form,m=c.composite_id,n=c.$composite_data.find(".composite_wrap .composite_button .form_data_"+d),o=c.composite_layout,p="";p="paged"===o?l.find(".scroll_select_component_option"):e.next(".component");var q=i.outerHeight(),r=0,s=!1;a(this).blur(),n.find(".variation_input").remove(),n.find(".attribute_input").remove(),e.find(".component_option_thumbnails .selected").removeClass("selected disabled"),e.find("#component_option_thumbnail_"+a(this).val()).addClass("selected");var t={action:"woocommerce_show_composited_product",product_id:a(this).val(),component_id:d,composite_id:m,security:wc_composite_params.show_product_nonce};j.removeClass("variations_form bundle_form cart"),h.off().find("*").off(),""!==t.product_id?(g.addClass("blocked_content").block(k),c.has_transition_lock=!0,a.post(woocommerce_params.ajax_url,t,function(d){try{"yes"===d.product_data.purchasable?(h.css("height",q),j.html(d.markup),b.init_qty_input(),b.init_scripts(),f.fire_scenario_actions(),f.trigger_ui_update(),c.update_composite(),e.trigger("wc-composite-component-loaded"),h.css("height","auto"),r=i.outerHeight(),Math.abs(r-q)>1&&(s=!0,h.css("height",q))):(h.css("height",q),j.html(d.markup),b.init_scripts(!1),f.fire_scenario_actions(),f.trigger_ui_update(),c.update_summary(),c.disable_add_to_cart())}catch(k){console.log(k),h.css("height",q),j.html('<div class="component_data" data-component_set="true" data-price="0" data-regular_price="0" data-product_type="none" style="display:none;"></div>'),b.init_scripts(!1),f.fire_scenario_actions(),f.trigger_ui_update(),c.update_summary(),c.disable_add_to_cart()}window.setTimeout(function(){if(s)h.css("height","auto"),r=i.outerHeight(),Math.abs(r-q)>1&&(s=!0,h.css("height",q)),h.animate({height:r},{duration:200,queue:!1,always:function(){if(p.length>0&&!p.is_in_viewport(!0)){var b=0;b="paged"===o?p.hasClass("scroll_bottom")?a(window).height()-80:50:a(window).height()-70;var d=a("html").scrollTop(),e="body";a("html").scrollTop(a("html").scrollTop()-1),d!=a("html").scrollTop()&&(e="html"),a(e).animate({scrollTop:p.offset().top-b},{duration:200,queue:!1,always:function(){h.css({height:"auto"}),g.unblock().removeClass("blocked_content"),c.has_transition_lock=!1}})}else h.css({height:"auto"}),g.unblock().removeClass("blocked_content"),c.has_transition_lock=!1}});else if(p.length>0&&!p.is_in_viewport(!0)){var b=0;b="paged"===o?p.hasClass("scroll_bottom")?a(window).height()-80:50:a(window).height()-70;var d=a("html").scrollTop(),e="body";a("html").scrollTop(a("html").scrollTop()-1),d!=a("html").scrollTop()&&(e="html"),a(e).animate({scrollTop:p.offset().top-b},{duration:200,queue:!1,always:function(){g.unblock().removeClass("blocked_content"),c.has_transition_lock=!1}})}else g.unblock().removeClass("blocked_content"),c.has_transition_lock=!1},400)},"json")):(h.css("height",q),j.html('<div class="component_data" data-component_set="true" data-price="0" data-regular_price="0" data-product_type="none" style="display:none;"></div>'),b.init_scripts(!1),f.fire_scenario_actions(),f.trigger_ui_update(),c.update_composite(),h.animate({height:i.outerHeight()},{duration:200,queue:!1,always:function(){h.css({height:"auto"})}}))}).on("click",".component_pagination a.component_pagination_element",function(){var d=b.$self,e=b.component_id,f=d.find(".component_ordering select"),g=parseInt(a(this).data("page_num")),h=b.get_selected_product_id(),i=c.composite_id,j=b.get_active_filters(),k={action:"woocommerce_show_component_options",load_page:g,component_id:e,composite_id:i,selected_option:h,filters:j,security:wc_composite_params.show_product_nonce};return f.length>0&&(k.orderby=f.val()),k.load_page>0&&(a(this).blur(),b.reload_component_options(k)),!1}).on("change",".component_ordering select",function(){var d=b.component_id,e=b.get_selected_product_id(),f=c.composite_id,g=a(this).val(),h=b.get_active_filters(),i={action:"woocommerce_show_component_options",load_page:1,component_id:d,composite_id:f,selected_option:e,orderby:g,filters:h,security:wc_composite_params.show_product_nonce};return a(this).blur(),b.reload_component_options(i),!1}).on("click",".component_filter_option a",function(){var d=b.$self,e=b.component_id,f=d.find(".component_ordering select"),g=a(this).closest(".component_filter_option"),h=b.get_selected_product_id(),i=c.composite_id,j={};g.hasClass("selected")?g.removeClass("selected"):g.addClass("selected"),b.update_filters_ui(),j=b.get_active_filters();var k={action:"woocommerce_show_component_options",load_page:1,component_id:e,composite_id:i,selected_option:h,filters:j,security:wc_composite_params.show_product_nonce};return f.length>0&&(k.orderby=f.val()),a(this).blur(),b.reload_component_options(k),!1}).on("click",".component_filters a.reset_component_filters",function(){var d=b.$self,e=b.component_id,f=d.find(".component_ordering select"),g=d.find(".component_filters .component_filter_option.selected");if(0==g.length)return!1;var h=b.get_selected_product_id(),i=c.composite_id,j={};g.removeClass("selected"),b.update_filters_ui();var k={action:"woocommerce_show_component_options",load_page:1,component_id:e,composite_id:i,selected_option:h,filters:j,security:wc_composite_params.show_product_nonce};return f.length>0&&(k.orderby=f.val()),a(this).blur(),b.reload_component_options(k),!1}).on("click",".component_filters a.reset_component_filter",function(){var d=b.$self,e=b.component_id,f=d.find(".component_ordering select"),g=a(this).closest(".component_filter").find(".component_filter_option.selected");if(0==g.length)return!1;var h=b.get_selected_product_id(),i=c.composite_id,j={};g.removeClass("selected"),b.update_filters_ui(),j=b.get_active_filters();var k={action:"woocommerce_show_component_options",load_page:1,component_id:e,composite_id:i,selected_option:h,filters:j,security:wc_composite_params.show_product_nonce};return f.length>0&&(k.orderby=f.val()),a(this).blur(),b.reload_component_options(k),!1}).on("click",".component_filter_title label",function(){var b=a(this).closest(".component_filter"),c=b.find(".component_filter_content");return d(b,c),a(this).blur(),!1}).on("click",".component_title",function(){var e=b.$self,f=c.$composite_form;if(!e.hasClass("toggled")||a(this).hasClass("inactive"))return!1;if(e.hasClass("progressive")&&e.hasClass("active"))return!1;var g=b.$component_inner;return d(e,g)&&e.hasClass("progressive")&&e.hasClass("blocked")&&window.setTimeout(function(){f.find(".page_button.next").click()},200),a(this).blur(),!1}).on("change",".component_wrap input.qty",function(){var b=parseFloat(a(this).attr("min")),d=parseFloat(a(this).attr("max"));b>=0&&parseFloat(a(this).val())<b&&a(this).val(b),d>0&&parseFloat(a(this).val())>d&&a(this).val(d),c.update_composite()})},init_steps:function(){var b=this;"paged"===b.composite_layout&&("componentized"===b.composite_layout_variation?(b.$composite_form.find(".multistep.active").removeClass("active"),b.$composite_data.addClass("multistep active"),b.$composite_pagination.find(".pagination_element_review").remove(),b.$composite_summary_widget.hide()):b.$composite_data.prev().hasClass("multistep")?(b.$composite_data.addClass("multistep"),b.$composite_data.hide()):b.$composite_pagination.find(".pagination_element_review").remove()),b.$composite_form.children(".component, .multistep").each(function(c){var e=a(this),f=a(this).data("item_id"),g=a(this).hasClass("component"),h=a(this).hasClass("cart");b.composite_steps[c]={step_id:f,step_index:c,step_title:e.data("nav_title"),_is_component:g,_is_review:h,$markup:e,get_title:function(){return this.step_title},get_markup:function(){return this.$markup},is_review:function(){return this._is_review},is_component:function(){return this._is_component},get_component:function(){return this._is_component?b.composite_components[this.step_index]:!1},is_current:function(){return this.$markup.hasClass("active")},is_next:function(){return this.$markup.hasClass("next")},is_previous:function(){return this.$markup.hasClass("prev")},show_step:function(){var c=this,d=b.$composite_form,e=b.composite_layout,f=b.composite_layout_variation,g=this.$markup,h=b.composite_initialized===!1?!1:!0;if("paged"===e&&h){var i=d.find(".scroll_show_component");if(i.length>0&&!i.is_in_viewport(!0)){var j=i.hasClass("scroll_bottom")?a(window).height()-80:50,k=a("html").scrollTop(),l="body";a("html").scrollTop(a("html").scrollTop()-1),k!=a("html").scrollTop()&&(l="html"),a(l).delay(20).animate({scrollTop:i.offset().top-j},{duration:250,queue:!1})}setTimeout(function(){b.$composite_summary_widget.length>0&&(c.is_review()?b.$composite_summary_widget.animate({opacity:0},{duration:250,queue:!1}):(b.$composite_summary_widget.slideDown(250),b.$composite_summary_widget.animate({opacity:1},{duration:250,queue:!1}))),c.is_review()&&b.$composite_summary_widget.slideUp(250)},20),"componentized"===f&&b.$composite_navigation.css(c.is_review()?{visibility:"hidden"}:{visibility:"visible"})}c.set_active(),c.update_block_state(),c.fire_scenario_actions(),c.trigger_ui_update(!0),"progressive"===e&&h&&g.hasClass("autoscrolled")&&setTimeout(function(){var b=g;if(b.length>0&&!g.is_in_viewport(!1)){var c=a("html").scrollTop(),d="body";a("html").scrollTop(a("html").scrollTop()-1),c!=a("html").scrollTop()&&(d="html"),a(d).animate({scrollTop:b.offset().top},{duration:250,queue:!1})}},300),g.trigger("wc-composite-show-component")},set_active:function(){var a=this,c=b.$composite_form,d=b.composite_layout,e=b.composite_layout_variation,f=b.get_current_step(),g=!1;f.step_id==a.step_id&&(g=!0),c.children(".multistep.active, .multistep.next, .multistep.prev").removeClass("active next prev"),this.get_markup().addClass("active");var h=this.get_markup().next(),i=this.get_markup().prev();"paged"===d&&"componentized"===e&&(h=c.find(".multistep.cart"),i=c.find(".multistep.cart")),h.hasClass("multistep")&&h.addClass("next"),i.hasClass("multistep")&&i.addClass("prev"),"progressive"!==d&&(g?a.get_markup().show():(b.has_transition_lock=!0,"slide"===wc_composite_params.transition_type?setTimeout(function(){var c=f.get_markup().height(),d=a.get_markup().height(),e=Math.max(c,d),g=150+Math.min(450,parseInt(e/5));f.get_markup().addClass("faded").slideUp({duration:g,always:function(){f.get_markup().removeClass("faded")}}),f.step_index<a.step_index&&(a.get_markup().after('<div style="display:none" class="active_placeholder"></div>'),a.get_markup().insertBefore(f.get_markup())),a.get_markup().slideDown({duration:g,always:function(){f.step_index<a.step_index&&b.$composite_form.find(".active_placeholder").replaceWith(a.get_markup()),b.has_transition_lock=!1}})},150):"fade"===wc_composite_params.transition_type&&(f.get_markup().addClass("faded"),a.get_markup().addClass("faded"),setTimeout(function(){a.get_markup().show(),setTimeout(function(){f.get_markup().hide(),a.get_markup().removeClass("faded")},10),b.has_transition_lock=!1},300)))),this.$markup.trigger("wc-composite-set-active-component")},update_block_state:function(){var a=b.composite_layout;if("progressive"!==a)return!1;var c=b.get_previous_step();if(c!==!1&&c.block_step_inputs(),this.unblock_step_inputs(),this.unblock_step(),c!==!1){var d=c.get_markup().find(".clear_component_options");d.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options")}},unblock_step:function(){this.$markup.hasClass("toggled")&&(this.$markup.hasClass("closed")&&d(this.$markup,this.$markup.find(".component_inner")),this.$markup.find(".component_title").removeClass("inactive")),this.$markup.removeClass("blocked")},block_next_steps:function(){var c=this.step_index;a.each(b.composite_steps,function(a,b){a>c&&(b.get_markup().hasClass("disabled")&&b.unblock_step_inputs(),b.block_step())})},block_step:function(){this.$markup.addClass("blocked"),this.$markup.hasClass("toggled")&&(this.$markup.hasClass("open")&&d(this.$markup,this.$markup.find(".component_inner")),this.$markup.find(".component_title").addClass("inactive"))},unblock_step_inputs:function(){this.$markup.find("select.disabled_input, input.disabled_input").removeClass("disabled_input").prop("disabled",!1),this.$markup.removeClass("disabled").trigger("wc-composite-enable-component-options");var a=this.$markup.find(".clear_component_options");a.html(wc_composite_params.i18n_clear_selection).removeClass("reset_component_options")},block_step_inputs:function(){this.$markup.find("select, input").addClass("disabled_input").prop("disabled","disabled"),this.$markup.addClass("disabled").trigger("wc-composite-disable-component-options");var a=this.$markup.find(".clear_component_options");a.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options")},is_blocked:function(){return this.$markup.hasClass("blocked")},fire_scenario_actions:function(a){"undefined"==typeof a&&(a=!1),b.actions_nesting++,b.update_active_scenarios(this.step_id),b.update_selections(this.step_id,a),1===b.actions_nesting&&this.get_markup().trigger("wc-composite-fire-scenario-actions"),b.actions_nesting--},trigger_ui_update:function(a){"undefined"==typeof a&&(a=!1),b.update_ui(this.step_id,a)},validate_inputs:function(){if(this.is_component()){var a=this.get_component(),b=a.get_selected_product_id(),c=a.get_selected_product_type();return b>0&&a.is_in_stock()?"variable"===c?""!=a.$component_summary.find('.variations_button input[name="variation_id"]').val()?!0:!1:"simple"===c||"none"===c?!0:1==a.$component_data.data("component_set")?!0:!1:""===b&&a.is_optional()?!0:!1}return!1}}})},show_step:function(b){var c=this;a.each(c.composite_steps,function(a,c){return c.step_id==b?(c.show_step(),!1):void 0})},show_previous_step:function(){var b=this;a.each(b.composite_steps,function(a,b){return b.is_previous()?(b.show_step(),!1):void 0})},show_next_step:function(){var b=this;a.each(b.composite_steps,function(a,b){return b.is_next()?(b.show_step(),!1):void 0})},get_step:function(b){var c=this,d=!1;return a.each(c.composite_steps,function(a,c){return c.step_id==b?(d=c,!1):void 0}),d},get_current_step:function(){var b=this,c=!1;return a.each(b.composite_steps,function(a,b){return b.is_current()?(c=b,!1):void 0}),c},get_previous_step:function(){var b=this,c=!1;return a.each(b.composite_steps,function(a,b){return b.is_previous()?(c=b,!1):void 0}),c},get_next_step:function(){
var b=this,c=!1;return a.each(b.composite_steps,function(a,b){return b.is_next()?(c=b,!1):void 0}),c},get_scenario_data:function(){var a=this,b=a.$composite_data.data("scenario_data");return b},update_active_scenarios:function(b){for(var c=this,d=c.get_step(b),e=c.composite_layout,f=d.step_index,g="",h=c.actions_nesting-1;h>0;h--)g+="	";d.is_review()&&(f=1e3);var i=c.get_scenario_data().scenarios,k=c.get_scenarios_by_type(i,"compat_group");0===k.length&&i.push("0");var l=i,m=i,n=[],o=[];"yes"===wc_composite_params.script_debug&&(console.log("\n"+g+"Selections update triggered by "+d.get_title()+" at "+(new Date).getTime().toString()+"..."),console.log("\n"+g+"Calculating active scenarios...")),a.each(c.composite_components,function(a,b){var d=b.component_id;if(("progressive"===e||"paged"===e)&&a>f)return!1;m=l.slice(),o=n.slice();var h=b.get_selected_product_id(),i=b.get_selected_product_type();if(null!==h&&h>=0){var k=c.get_scenario_data().scenario_data,p=k[d];if(""===h){if(!(0 in p))return!0;h="0"}var q=p[h];"yes"===wc_composite_params.script_debug&&console.log(g+"Selection #"+h+" of "+b.get_title()+" in scenarios: "+q.toString()),n.push(d);var r=j(l,q),s=r.length>0,t=!0;if(s&&"variable"===i){var u=b.$self.find('.single_variation_wrap .variations_button input[name="variation_id"]').val();if(u>0){var v=p[u];"yes"===wc_composite_params.script_debug&&console.log(g+"Variation selection #"+u+" of "+d+" in scenarios: "+q.toString()),r=j(r,v),t=r.length>0}}var w=s&&t;if(!w)return s?("yes"===wc_composite_params.script_debug&&console.log(g+"	Variation selection not found in any scenario - breaking out and resetting..."),b.$self.addClass("reset_variation")):"0"!==h?("yes"===wc_composite_params.script_debug&&console.log(g+"	Product selection not found in any scenario - breaking out and resetting..."),b.$self.addClass("reset")):"yes"===wc_composite_params.script_debug&&console.log(g+"	Selection not found in any scenario - breaking out..."),!1;l=r,"yes"===wc_composite_params.script_debug&&console.log(g+"	Active scenarios: "+l.toString())}}),"yes"===wc_composite_params.script_debug&&console.log(g+"Removing active scenarios where all scenario shaping components are masked..."),"yes"===wc_composite_params.script_debug&&console.log(g+"	Scenario shaping components: "+n.toString()),c.active_scenarios={incl_current:c.get_binding_scenarios(l,n),excl_current:c.get_binding_scenarios(m,o)},c.$composite_data.data("active_scenarios",c.active_scenarios.incl_current),"yes"===wc_composite_params.script_debug&&console.log("\n"+g+"Final active scenarios incl.: "+c.active_scenarios.incl_current.toString()+"\n"+g+"Final active scenarios excl.: "+c.active_scenarios.excl_current.toString())},get_binding_scenarios:function(b,c){var d=this,e=d.get_scenario_data().scenario_settings.masked_components,f=[];return c.length>0?b.length>0&&a.each(b,function(b,d){var g=!0;a.each(c,function(b,c){return-1==a.inArray(c.toString(),e[d])?(g=!1,!1):void 0}),g||f.push(d)}):f=b,0===f.length&&b.length>0&&(f=b),f},get_active_scenarios_by_type:function(a){var b=this,c=b.get_scenarios_by_type(b.active_scenarios.incl_current,a),d=b.get_scenarios_by_type(b.active_scenarios.excl_current,a);return{incl_current:c,excl_current:d}},get_scenarios_by_type:function(b,c){var d=this,e=[],f="";if(b.length>0)for(var g in b)f=b[g],a.inArray(c,d.get_scenario_data().scenario_settings.scenario_actions[f])>-1&&e.push(f);return e},get_binding_scenarios_for:function(b,c){var d=this,e=d.get_scenario_data().scenario_settings.masked_components,f=[];return b.length>0&&a.each(b,function(b,d){-1==a.inArray(c.toString(),e[d])&&f.push(d)}),f},update_selections:function(b,c){for(var d=this,f=d.composite_layout,g=d.get_step(b),h=[],i=!1,j="",k=d.actions_nesting-1;k>0;k--)j+="	";if("undefined"==typeof c&&(c=!1),("progressive"===f||"paged"===f)&&(c=!0),"yes"===wc_composite_params.script_debug&&console.log("\n"+j+"Updating selections..."),"yes"===wc_composite_params.script_debug&&console.log("\n"+j+"Clearing incompatible selections..."),a.each(d.composite_components,function(c,d){var g=d.component_id,h=d.$component_options.find("select.component_options_select"),k=d.get_selected_product_id(),l=d.get_selected_product_type();if(b!=g&&"single"!==f)return!0;if(null===k&&(d.$self.addClass("reset"),"yes"===wc_composite_params.script_debug&&console.log(j+d.get_title()+" selection was found disabled.")),"yes"===wc_composite_params.is_wc_version_gte_2_3){if("variable"===l&&d.$component_content.find('.single_variation_wrap .variations_button input[name="variation_id"]').val()>0){var m=d.$component_summary.find(".attribute-options"),n=m.length;n>0&&m.each(function(){var b=a(this).find("select option:selected");return b.hasClass("enabled")?void 0:("yes"===wc_composite_params.script_debug&&console.log(j+d.get_title()+" variation selections were found disabled."),d.$self.addClass("reset_variation"),i=!0,!1)})}}else if("variable"===l){var o=d.$self.find(".component_summary > .content");if(!e(o))return d.$self.addClass("reset_variation"),i=!0,!1}if(d.$self.hasClass("reset")){if(!d.$self.hasClass("resetting"))return"yes"===wc_composite_params.script_debug&&console.log(j+"Resetting "+d.get_title()+"...\n"),d.$self.addClass("resetting"),h.val("").change(),i=!0,!1;d.$self.removeClass("reset"),d.$self.removeClass("resetting"),"yes"===wc_composite_params.script_debug&&console.log(j+"Reset "+d.get_title()+" complete...\n")}if(d.$self.hasClass("reset_variation")){if(!d.$self.hasClass("resetting"))return"yes"===wc_composite_params.script_debug&&console.log(j+"Resetting variation selections of "+d.get_title()+"...\n"),d.$self.addClass("resetting"),d.$component_summary.find(".reset_variations").trigger("click"),i=!0,!1;d.$self.removeClass("reset_variation"),d.$self.removeClass("resetting"),"yes"===wc_composite_params.script_debug&&console.log(j+"Reset "+d.get_title()+" complete...\n")}}),!i){var l=g.step_index;g.is_review()&&(l=1e3);var m=d.get_active_scenarios_by_type("compat_group");a.each(d.composite_components,function(e,f){var g=f.component_id,i=f.$self.find(".component_summary > .content");h=c&&l==e?m.excl_current:m.incl_current,"yes"===wc_composite_params.script_debug&&(console.log(j+"Updating selections of "+f.get_title()+"..."),console.log(j+"	Reference scenarios: "+h.toString()),console.log(j+"	Removing any scenarios where the current component is masked...")),h=d.get_binding_scenarios_for(h,g),0===h.length&&h.push("0"),"yes"===wc_composite_params.script_debug&&console.log(j+"	Active scenarios: "+h.slice().toString());var k=d.get_scenario_data().scenario_data,n=k[g],o=!1;if(0 in n){var p=n[0];for(var q in p){var r=p[q];if(a.inArray(r,h)>-1){o=!0;break}}}else o=!1;o?("yes"===wc_composite_params.script_debug&&console.log(j+"	Component set as optional."),f.set_optional(!0)):f.set_optional(!1),f.$component_options.find("select.component_options_select option").each(function(){var b=a(this).val();if(b>=0&&""!==b){"yes"===wc_composite_params.script_debug&&console.log(j+"	Updating selection #"+b+":");var c=n[b],d=!1;"yes"===wc_composite_params.script_debug&&console.log(j+"		Selection in scenarios: "+c.toString());for(var e in c){var g=c[e];if(a.inArray(g,h)>-1){d=!0;break}}d?("yes"===wc_composite_params.script_debug&&console.log(j+"		Selection enabled."),a(this).prop("disabled",!1).trigger("wc-composite-selection-compatible"),f.$self.find("#component_option_thumbnail_"+a(this).val()).removeClass("disabled")):("yes"===wc_composite_params.script_debug&&console.log(j+"		Selection disabled."),a(this).prop("disabled","disabled").trigger("wc-composite-selection-incompatible"),f.$self.find("#component_option_thumbnail_"+a(this).val()).addClass("disabled"))}});var s=f.get_selected_product_type();if("variable"===s){var t=i.find('.single_variation_wrap .variations_button input[name="variation_id"]'),u=t.val(),v=u>0?!1:!0;"yes"===wc_composite_params.script_debug&&console.log(j+"		Checking variations..."),u>0&&"yes"===wc_composite_params.script_debug&&console.log(j+"			--- Stored variation is #"+u);var w=f.$component_data.data("product_variations"),x=[];for(var y in w){var z=w[y].variation_id,A=n[z],B=!1;"yes"===wc_composite_params.script_debug&&(console.log(j+"			Checking variation #"+z+":"),console.log(j+"			Selection in scenarios: "+A.toString()));for(var C in A){var D=A[C];if(a.inArray(D,h)>-1){B=!0;break}}if("yes"===wc_composite_params.is_wc_version_gte_2_3){var E=a.extend(!0,{},w[y]),F=!1;if(B)"yes"===wc_composite_params.script_debug&&console.log(j+"			Variation enabled."),parseInt(z)===parseInt(u)&&(v=!0,"yes"===wc_composite_params.script_debug&&console.log(j+"			--- Stored variation is valid."));else{E.variation_is_active=!1;for(var G in E.attributes)if(""===E.attributes[G]){F=!0;break}"yes"===wc_composite_params.script_debug&&console.log(j+"			Variation disabled.")}F||x.push(E)}else B?(x.push(w[y]),"yes"===wc_composite_params.script_debug&&console.log(j+"			Variation enabled."),parseInt(z)===parseInt(u)&&(v=!0,"yes"===wc_composite_params.script_debug&&console.log(j+"			--- Stored variation is valid."))):"yes"===wc_composite_params.script_debug&&console.log(j+"			Variation disabled.")}i.data("product_variations",x),b!=g&&i.trigger("update_variation_values",[x]),v||("yes"===wc_composite_params.script_debug&&console.log(j+"			--- Stored variation was NOT found."),d.triggered_by_step=b,i.find(".reset_variations").trigger("click"))}}),"yes"===wc_composite_params.script_debug&&console.log(j+"Finished updating component selections.\n\n")}},update_ui:function(a,b){var c=this,d=c.get_step(a),e=c.composite_layout;return"single"===e?!1:d.is_current()?(c.composite_initialized===!1&&(b=!1),b&&(c.has_update_nav_delay=!0),c.has_ui_update_lock===!0?!1:(c.has_ui_update_lock=!0,void setTimeout(function(){c.update_ui_task(a,c.has_update_nav_delay),c.has_ui_update_lock=!1,c.has_update_nav_delay=!1,d.get_markup().trigger("wc-composite-ui-updated")},10))):!1},update_ui_task:function(b,c){var d=this,e=d.get_step(b),f=e.get_markup(),g=d.$composite_form,h=d.$composite_navigation,i=d.composite_layout,j=d.composite_layout_variation,k=!1,l=d.get_next_step(),m=d.get_previous_step(),n=c?300:10;setTimeout(function(){if(e.validate_inputs()||"componentized"===j&&e.is_component())h.find(".next").addClass("invisible"),h.find(".prev").addClass("invisible"),l&&"componentized"!==j?(h.find(".next").html(wc_composite_params.i18n_next_step.replace("%s",l.get_title())),h.find(".next").removeClass("invisible"),l.get_markup().hasClass("toggled")&&l.get_markup().find(".component_title").removeClass("inactive")):(g.find(".composite_navigation.paged .next").html(wc_composite_params.i18n_final_step),g.find(".composite_navigation.paged .next").removeClass("invisible")),m&&m.is_component()&&(g.find(".composite_navigation.paged .prev").html(wc_composite_params.i18n_previous_step.replace("%s",m.get_title())),g.find(".composite_navigation.paged .prev").removeClass("invisible")),h.find(".prompt").html(""),h.find(".prompt").addClass("invisible"),k=!0;else{if(h.find(".prev").addClass("invisible"),h.find(".next").addClass("invisible"),l&&l.get_markup().hasClass("toggled")&&l.get_markup().find(".component_title").addClass("inactive"),m&&m.is_component()){var a=m.get_component().get_selected_product_id();(a>0||"0"===a||""===a&&m.get_component().is_optional())&&(g.find(".composite_navigation.paged .prev").html(wc_composite_params.i18n_previous_step.replace("%s",m.get_title())),g.find(".composite_navigation.paged .prev").removeClass("invisible"))}e.is_component()&&(f.hasClass("last")&&f.hasClass("progressive")||(h.find(".prompt").html(wc_composite_params.i18n_select_component_options.replace("%s",e.get_title())),h.find(".prompt").removeClass("invisible")))}if("progressive"===i){var b=g.find(".composite_navigation.progressive"),c=f.find(".composite_navigation.progressive"),d=g.find(".component.next");0==c.length?(b.css({visibility:"hidden"}),b.slideUp({duration:200,queue:!1,always:function(){b.appendTo(f.find(".component_inner")).css({visibility:"visible"}),f.hasClass("last")||d.hasClass("toggled")&&k||b.slideDown(200)}})):f.hasClass("last")||d.hasClass("toggled")&&k?b.css({visibility:"hidden"}).slideUp(200):b.css({visibility:"visible"}).slideDown(200)}},n);var o=d.$composite_pagination,p=a.merge(g.find(".composite_summary"),a(".widget_composite_summary"));if(0==o.length&&0==p.length)return!1;var q=!1;a.each(d.composite_steps,function(a,b){if(a>0){var c=d.composite_steps[a-1];c.is_review()||(!1===c.validate_inputs()?q=!0:c.is_blocked()&&(q=!0))}if(o.length>0){var e=o.find(".pagination_element_"+b.step_id),f=e.find(".element_link");b.is_current()?(f.addClass("inactive"),e.addClass("pagination_element_current")):q?(f.addClass("inactive"),e.removeClass("pagination_element_current")):(f.removeClass("inactive"),e.removeClass("pagination_element_current"))}if(p.length>0){var g=p.find(".summary_element_"+b.step_id),h=g.find(".summary_element_link");b.is_current()?(h.removeClass("disabled"),h.addClass("selected"),g.find(".summary_element_selection_prompt").slideUp(200)):(g.find(".summary_element_selection_prompt").slideDown(200),q?(h.removeClass("selected"),h.addClass("disabled")):(h.removeClass("disabled"),h.removeClass("selected")))}})},update_summary:function(){var d=this,e=d.$composite_summary,f=d.$composite_data.data("price_data");if(0==e.length)return!1;a.each(d.composite_components,function(d,g){var j=g.component_id,k=g.$self,l=j,m=e.find(".summary_element_"+l),n=m.find(".summary_element_wrapper"),o=m.find(".summary_element_wrapper_inner"),p=g.get_selected_product_type(),q=g.get_selected_product_id(),r=parseInt(k.find(".component_wrap input.qty").val()),s="",t="",u="",v="",w="",x="";if(e.is(":visible")){var y=o.outerHeight();n.css("height",y)}if("none"===p)g.is_optional()&&(s=a("#component_options_"+l+" option.none").data("title"));else if("variable"===p)q>0&&(r>0||0===r)&&(v=a("#component_options_"+l+" option:selected").data("title"),w=" <strong>&times; "+r+"</strong>",x=b(k.find(".variations")),x&&(x=" ("+x+")"),s=v+x+w,u=k.find(".composited_product_image img").attr("src"),"undefined"==typeof u&&(u=k.find("#component_options_"+l+" option:selected").data("image_src")));else if("bundle"===p){if(q>0&&(r>0||0===r)){var z="",A=0;k.find(".bundled_product .cart").each(function(){a(this).data("quantity")>0&&A++}),0==A?s=wc_composite_params.i18n_none:(k.find(".bundled_product .cart").each(function(){if(a(this).data("quantity")>0){var c=b(a(this).find(".variations"));c&&(c=" ("+c+")"),z=z+a(this).data("title")+c+" <strong>&times; "+parseInt(a(this).data("quantity")*r)+"</strong></br>"}}),s=z),u=k.find("#component_options_"+l+" option:selected").data("image_src")}}else q>0&&(v=a("#component_options_"+l+" option:selected").data("title"),w=isNaN(r)?"":"<strong>&times; "+r+"</strong>",s=v+" "+w,u=k.find("#component_options_"+l+" option:selected").data("image_src"));if(t=s?k.hasClass("static")?'<a href="">'+wc_composite_params.i18n_summary_static_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_filled_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_empty_component+"</a>",m.find(".summary_element_selection").html(s?'<span class="summary_element_content">'+s+'</span><span class="summary_element_content summary_element_selection_prompt">'+t+"</span>":'<span class="summary_element_content summary_element_selection_prompt">'+t+"</span>"),a(this).hasClass("active")&&m.find(".summary_element_selection_prompt").hide(),c(m,u),f.per_product_pricing===!0&&q>0&&r>0&&g.get_step().validate_inputs()){var B=(parseFloat(f.prices[l])+parseFloat(f.addons_prices[l]))*r,C=(parseFloat(f.regular_prices[l])+parseFloat(f.addons_prices[l]))*r,D=h(i(B)),E=h(i(C));m.find(".summary_element_price").html(C>B?'<span class="price summary_element_content"><del>'+E+"</del> <ins>"+D+"</ins></span>":'<span class="price summary_element_content">'+D+"</span>")}else m.find(".summary_element_price").html("");k.trigger("wc-composite-component-update-summary-content"),e.is(":visible")&&n.animate({height:o.outerHeight()},{duration:200,queue:!1,always:function(){n.css({height:"auto"})}})});var g=a(".widget_composite_summary_content");if(g.length>0){var j=e.find(".summary_elements").clone();j.find(".summary_element_wrapper").css({height:"auto"}),j.find(".summary_element").css({width:"100%"}),j.find(".summary_element_selection_prompt").remove(),g.html(j)}},update_composite:function(a){var b=this;return b.composite_initialized!==!0?!1:b.has_update_lock===!0?!1:(b.has_update_lock=!0,void window.setTimeout(function(){b.update_composite_task(a),b.has_update_lock=!1},50))},update_composite_task:function(b){var c=this,d=c.$composite_form,e=c.$composite_data;"undefined"==typeof b&&(b=!1);var f=!0,g={},j=[],k=e.data("price_data"),l=e.data("progression_style"),m=c.composite_layout,n=e.find(".composite_wrap p.stock");if(c.composite_stock_status!==!1?n.replaceWith(a(c.composite_stock_status)):n.remove(),("progressive"===m||"paged"===m)&&"strict"===l&&!d.find(".multistep").last().hasClass("active"))return c.disable_add_to_cart(),!1;if(a.each(c.composite_components,function(b,c){var d=c.component_id,h=c.$self,i=d,l=e.find(".composite_wrap .composite_button .form_data_"+i),m=h.find("#component_options_"+i).val(),n=h.find(".component_wrap input.qty").val(),o=l.find("input.variation_input").val();k.prices[i]=parseFloat(c.$component_data.data("price")),k.regular_prices[i]=parseFloat(c.$component_data.data("regular_price")),k.addons_prices[i]=0,h.find(".addon").each(function(){var b=0;a(this).is(".addon-custom-price")?b=a(this).val():a(this).is(".addon-input_multiplier")?(isNaN(a(this).val())||""==a(this).val()?(a(this).val(""),a(this).closest("p").find(".addon-alert").show()):(""!=a(this).val()&&a(this).val(Math.ceil(a(this).val())),a(this).closest("p").find(".addon-alert").hide()),b=a(this).data("price")*a(this).val()):a(this).is(".addon-checkbox, .addon-radio")?a(this).is(":checked")&&(b=a(this).data("price")):a(this).is(".addon-select")?a(this).val()&&(b=a(this).find("option:selected").data("price")):a(this).val()&&(b=a(this).data("price")),b||(b=0),k.addons_prices[i]=parseFloat(k.addons_prices[i])+parseFloat(b)});var p=c.get_selected_product_type();"undefined"==typeof p||""==p?f=!1:m>0||c.is_optional()?"none"!==p&&""===n?f=!1:"variable"!==p||"undefined"!=typeof o&&0!=c.$component_data.data("component_set")?"variable"!==p&&"simple"!==p&&"none"!==p&&0==c.$component_data.data("component_set")?f=!1:c.is_in_stock()?g[i]=n>0?parseInt(n):0:(j.push(wc_composite_params.i18n_insufficient_item_stock.replace("%s",a("#component_options_"+i+" option:selected").data("title")).replace("%v",c.get_title())),f=!1):f=!1:f=!1}),c.update_summary(),f){if(0==k.per_product_pricing&&1==k.price_undefined)return c.disable_add_to_cart(wc_composite_params.i18n_unavailable_text),!1;if(1==k.per_product_pricing){k.total=0,k.regular_total=0;for(var o in k.prices)k.total+=(parseFloat(k.prices[o])+parseFloat(k.addons_prices[o]))*g[o],k.regular_total+=(parseFloat(k.regular_prices[o])+parseFloat(k.addons_prices[o]))*g[o];k.total+=parseFloat(k.base_price),k.regular_total+=parseFloat(k.base_regular_price)}else{k.total=parseFloat(k.base_price),k.regular_total=parseFloat(k.base_regular_price);for(var p in k.addons_prices)k.total+=parseFloat(k.addons_prices[p])*g[p],k.regular_total+=parseFloat(k.addons_prices[p])*g[p]}var q=e.find("#product-addons-total");if(q.length>0&&(q.data("price",k.total),e.trigger("woocommerce-product-addons-update")),0==k.total&&1==k.show_free_string)e.find(".composite_price").html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+wc_composite_params.i18n_free+"</p>");else{var r=h(i(k.total)),s=h(i(k.regular_total));e.find(".composite_price").html(k.regular_total>k.total?'<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span><del>"+s+"</del> <ins>"+r+"</ins></p>":'<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+r+"</p>")}var t=e.data("button_behaviour");"new"!==t?e.find(".composite_wrap").slideDown(200):e.find(".composite_button button").prop("disabled",!1).removeClass("disabled"),e.find(".composite_wrap").trigger("wc-composite-show-add-to-cart")}else{if(j.length>0){var u='<p class="stock out-of-stock">'+wc_composite_params.i18n_insufficient_stock+"</p>",v=0,w="";for(var x in j)v++,w=1==j.length||1==v?j[x]:wc_composite_params.i18n_insufficient_item_stock_comma_sep.replace("%s",w).replace("%v",j[x]);e.find(".composite_wrap p.stock").length>0?e.find(".composite_wrap p.stock").replaceWith(a(u.replace("%s",w))):e.find(".composite_wrap .composite_price").after(a(u.replace("%s",w)))}b||c.disable_add_to_cart()}var y=a(".widget_composite_summary_content");if(y.length>0){var z=e.find(".composite_wrap .composite_price").clone();y.append(z.addClass("cp_clearfix"))}},disable_add_to_cart:function(a){var b=this,c=b.$composite_data,d=c.data("button_behaviour");if("new"===d){if("undefined"==typeof a){var e=b.get_pending_components_string();a=e?wc_composite_params.i18n_select_options.replace("%s",e):""}c.find(".composite_price").html(a),c.find(".composite_button button").prop("disabled",!0).addClass("disabled")}else c.find(".composite_price").html(""),c.find(".composite_wrap").slideUp(200);c.find(".composite_wrap").trigger("wc-composite-hide-add-to-cart")},get_pending_components_string:function(){var b=this,c=[],d="",e=b.$composite_data.data("progression_style");a.each(b.composite_components,function(a,b){var d=b.get_selected_product_id(),f=b.$component_data.data("component_set");(!(d>0)&&!b.is_optional()||"strict"===e&&b.$self.hasClass("blocked")||0==f||"undefined"==typeof f)&&c.push(b.get_title())});var f=c.length;if(f>0){var g=0;for(var h in c)g++,d=1==f||1==g?"&quot;"+c[h]+"&quot;":g==f?wc_composite_params.i18n_select_options_and_sep.replace("%s",d).replace("%v",c[h]):wc_composite_params.i18n_select_options_comma_sep.replace("%s",d).replace("%v",c[h])}return d}},wc_cp_composite_scripts[g].init()},a.fn.is_in_viewport=function(b,c,d){var e=a(window);if(!(this.length<1)){var f=this.length>1?this.eq(0):this,g=f.get(0),h=e.width(),i=e.height(),d=d?d:"both",j=c===!0?g.offsetWidth*g.offsetHeight:!0;if("function"==typeof g.getBoundingClientRect){var k=g.getBoundingClientRect(),l=k.top>=0&&k.top<i,m=k.bottom>0&&k.bottom<=i,n=k.left>=0&&k.left<h,o=k.right>0&&k.right<=h,p=b?l||m:l&&m,q=b?n||o:n&&o;if("both"===d)return j&&p&&q;if("vertical"===d)return j&&p;if("horizontal"===d)return j&&q}else{var r=e.scrollTop(),s=r+i,t=e.scrollLeft(),u=t+h,v=f.offset(),w=v.top,x=w+f.height(),y=v.left,z=y+f.width(),A=b===!0?x:w,B=b===!0?w:x,C=b===!0?z:y,D=b===!0?y:z;if("both"===d)return!!j&&s>=B&&A>=r&&u>=D&&C>=t;if("vertical"===d)return!!j&&s>=B&&A>=r;if("horizontal"===d)return!!j&&u>=D&&C>=t}}},a(".composite_form .composite_data").each(function(){a(this).wc_composite_form()})});