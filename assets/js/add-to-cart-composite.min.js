function wc_cp_get_variable_product_attributes_description(t){var e=t.find(".attribute-options"),o=e.length,i="";return 0==o?"":(e.each(function(t){var e=$(this).find("select").val();return""===e?(i="",!1):(i=i+$(this).data("attribute_label")+": "+$(this).find("select option:selected").text(),void(t!==o-1&&(i+=", ")))}),i)}function wc_cp_update_summary_element_image(t,e){var o=t.find(".summary_element_image img");if(0==o.length||o.hasClass("norefresh"))return!1;var i=o.attr("data-o_src");e?("undefined"==typeof i&&(i=o.attr("src")?o.attr("src"):"",o.attr("data-o_src",i)),o.attr("src",e)):"undefined"!=typeof i&&o.attr("src",i)}function wc_cp_toggle_element(t,e){return t.hasClass("closed")?(e.slideDown(300,function(){t.removeClass("animating")}),t.removeClass("closed").addClass("open animating")):(e.slideUp(),t.removeClass("open").addClass("closed")),!0}function wc_cp_has_valid_default_attributes(t){var e={};t.find(".variations select").each(function(){var t=$(this).val();e[$(this).attr("name")]=t});var o=t.data("product_variations"),i=wc_cp_find_matching_variations(o,e),s=i.shift();return s?!0:!1}function wc_cp_find_matching_variations(t,e){for(var o=[],i=0;i<t.length;i++){var s=t[i];wc_cp_variations_match(s.attributes,e)&&o.push(s)}return o}function wc_cp_variations_match(t,e){var o=!0;for(var i in t){var s=t[i],n=e[i];void 0!==s&&void 0!==n&&0!=s.length&&0!=n.length&&s!=n&&(o=!1)}return o}function wc_cp_woocommerce_number_format(t){var e=wc_composite_params.currency_format_decimal_sep,o=wc_composite_params.currency_position,i=wc_composite_params.currency_symbol,s=wc_composite_params.currency_format_trim_zeros,n=wc_composite_params.currency_format_num_decimals;if("yes"==s&&n>0){for(var a=0;n>a;a++)e+="0";t=t.replace(e,"")}var c="";return"left"==o?c='<span class="amount">'+i+t+"</span>":"right"==o?c='<span class="amount">'+t+i+"</span>":"left_space"==o?c='<span class="amount">'+i+" "+t+"</span>":"right_space"==o&&(c='<span class="amount">'+t+" "+i+"</span>"),c}function wc_cp_number_format(t){var e=wc_composite_params.currency_format_num_decimals,o=wc_composite_params.currency_format_decimal_sep,i=wc_composite_params.currency_format_thousand_sep,s=t,n=isNaN(e=Math.abs(e))?2:e,a="undefined"==typeof o?",":o,c="undefined"==typeof i?".":i,r=0>s?"-":"",_=parseInt(s=Math.abs(+s||0).toFixed(n))+"",p=(p=_.length)>3?p%3:0;return r+(p?_.substr(0,p)+c:"")+_.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+c)+(n?a+Math.abs(s-_).toFixed(n).slice(2):"")}function wc_cp_intersect_safe(t,e){var o=0,i=0,s=[];for(t.sort(),e.sort();o<t.length&&i<e.length;)t[o]<e[i]?o++:t[o]>e[i]?i++:(s.push(t[o]),o++,i++);return s}function wc_cp_ext_get_sku(t){var e=t.find(".composite_data"),o=e.data("container_id"),i=[wc_composite_ext_product_data.sku];wc_cp_composite_scripts[o].$components.each(function(){jQuery(this).find(".component_options_select").each(function(){var t=$(this).data("sku-order");t&&(i[t]=$(this).find("option:selected").data("sku-build")?$(this).find("option:selected").data("sku-build"):$(this).data("sku-default"))})});var s=i.join("");return s}function wc_cp_ext_get_weight(t){var e=t.find(".composite_data"),o=e.data("container_id"),i=parseFloat("undefined"!=typeof wc_composite_ext_product_data.weight?wc_composite_ext_product_data.weight:0);return wc_cp_composite_scripts[o].$components.each(function(){jQuery(this).find(".component_options_select option:selected").each(function(){$(this).data("product-weight")&&"undefined"!=typeof $(this).data("product-weight")&&$(this).data("product-weight")>0&&(i+=parseFloat($(this).data("product-weight")))})}),i.toFixed(1)}var wc_cp_composite_scripts={};jQuery(document).ready(function(t){t("body").on("quick-view-displayed",function(){t(".composite_form .composite_data").each(function(){t(this).wc_composite_form()})}),t(window).resize(function(){t(".composite_form").each(function(){t(this).width()<=wc_composite_params.small_width_threshold?t(this).addClass("small_width"):t(this).removeClass("small_width"),t(this).width()>wc_composite_params.full_width_threshold?t(this).addClass("full_width"):t(this).removeClass("full_width"),wc_composite_params.legacy_width_threshold&&(t(this).width()<=wc_composite_params.legacy_width_threshold?t(this).addClass("legacy_width"):t(this).removeClass("legacy_width"))})}).trigger("resize"),t(".widget_composite_summary").on("click",".summary_element_link",function(e){var o=t(this).closest(".composite_summary"),i=o.find(".widget_composite_summary_content").data("container_id"),s=t("#composite_data_"+i).closest(".composite_form");if(t(this).hasClass("disabled"))return!1;var n=wc_cp_composite_scripts[i];if(n.has_transition_lock)return!1;if("undefined"==typeof n)return!1;var a=t(this).closest(".summary_element").data("item_id");if("undefined"==typeof a){var c=o.find(".summary_element").index(t(this).closest(".summary_element"));a=s.find(".multistep.component:eq("+c+")").data("item_id")}var r=n.get_step(a);return r===!1?!1:(r.get_markup().hasClass("progressive")&&r.block_next_steps(),r.is_current()||r.show_step(),!1)}).on("click","a.summary_element_tap",function(e){return t(this).closest(".summary_element_link").trigger("click"),!1});var e={};e="yes"===wc_composite_params.is_wc_version_gte_2_3?{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 )",opacity:.6}}:{message:null,overlayCSS:{background:"rgba( 255, 255, 255, 0 ) url("+woocommerce_params.ajax_loader_url+") no-repeat center",backgroundSize:"20px 20px",opacity:.6}},t.fn.wc_composite_form=function(){if(!t(this).hasClass("composite_data"))return!0;var o=t(this),s=t(this).data("container_id");if("undefined"!=typeof wc_cp_composite_scripts[s])return!0;var n=o.closest(".composite_form");wc_cp_composite_scripts[s]={$composite_data:o,$composite_form:n,$add_to_cart_button:n.find(".composite_add_to_cart_button"),$composite_navigation:n.find(".composite_navigation"),$composite_pagination:n.find(".composite_pagination"),$composite_summary:n.find(".composite_summary"),$composite_summary_widget:t(".widget_composite_summary"),$components:n.find(".component"),composite_id:s,composite_layout:o.data("bto_style"),composite_layout_variation:o.data("bto_style_variation"),composite_selection_mode:o.data("bto_selection_mode"),composite_stock_status:!1,actions_nesting:0,composite_components:{},composite_steps:{},composite_initialized:!1,has_update_lock:!1,has_ui_update_lock:!1,has_transition_lock:!1,has_update_nav_delay:!1,triggered_by_step:!1,active_scenarios:{},init:function(){this.bind_event_handlers(),this.init_components(),this.init_steps();var e=this,o=e.$composite_data;o.find(".composite_wrap p.stock").length>0&&(e.composite_stock_status=o.find(".composite_wrap p.stock").clone().wrap("<div>").parent().html());var i=o.find("#product-addons-total");o.find(".composite_price").after(i),o.find(".nyp").trigger("woocommerce-nyp-updated-item");var s=e.composite_layout,n=e.$composite_form;"progressive"===e.composite_layout&&e.$composite_form.find(".toggled:not(.active) .component_title").addClass("inactive"),o.trigger("wc-composite-initializing"),t.each(e.composite_components,function(t,e){e.init_scripts(),e.$self.trigger("wc-composite-component-loaded")}),n.css("visibility","visible");var a=e.get_current_step();"paged"===s||"progressive"===s?a.show_step():(a.set_active(),a.fire_scenario_actions()),e.composite_initialized=!0,e.update_composite(),this.$components.each(function(){t(this).trigger("wc-composite-component-options-loaded")}),o.trigger("wc-composite-initialized")},bind_event_handlers:function(){var e=this;this.$add_to_cart_button.on("click",function(){t.each(e.composite_components,function(e,o){var i=o.component_id;o.$self.find('.variations_form .variations .attribute-options select, .variations_form .component_wrap input[name="variation_id"]').each(function(){t(this).attr("name",t(this).attr("name")+"_"+i)}),o.$self.find("select, input").each(function(){t(this).prop("disabled",!1)})})}),this.$composite_data.on("woocommerce-nyp-updated-item",function(){var o=t(this).find(".nyp");if(o.length>0){var i=t(this).data("price_data");i.base_price=o.data("price"),i.price_undefined=!1,e.update_composite(!0)}}),this.$composite_navigation.on("click",".page_button",function(){if(e.has_transition_lock)return!1;if(t(this).hasClass("next"))if(e.get_next_step())e.show_next_step();else{var o=e.$composite_form.find(".scroll_final_step");if(o.length>0){var i=o.hasClass("scroll_bottom")?t(window).height()-80:80,s=t("html").scrollTop(),n="body";t("html").scrollTop(t("html").scrollTop()-1),s!=t("html").scrollTop()&&(n="html"),t(n).animate({scrollTop:o.offset().top-i},200)}}else e.show_previous_step();return!1}),this.$composite_pagination.on("click",".pagination_element a",function(){if(e.has_transition_lock)return!1;if(t(this).hasClass("inactive"))return!1;var o=t(this).closest(".pagination_element").data("item_id");return e.show_step(o),!1}),this.$composite_summary.on("click",".summary_element_link",function(){if(e.has_transition_lock)return!1;var o=e.$composite_form;if(t(this).hasClass("disabled"))return!1;var i=t(this).closest(".summary_element").data("item_id");if("undefined"==typeof i){var s=e.$composite_summary,n=s.find(".summary_element").index(t(this).closest(".summary_element"));i=o.find(".multistep.component:eq("+n+")").data("item_id")}var a=e.get_step(i);return a===!1?!1:(a.get_markup().hasClass("progressive")&&a.block_next_steps(),a.is_current()||a.show_step(),!1)}).on("click","a.summary_element_tap",function(){return t(this).closest(".summary_element_link").trigger("click"),!1})},init_components:function(){var o=this;o.$components.each(function(i){var s=t(this),n=s.attr("data-item_id");o.composite_components[i]={component_id:n,component_index:i,component_title:s.data("nav_title"),_is_optional:!1,$self:s,$component_summary:s.find(".component_summary"),$component_selections:s.find(".component_selections"),$component_content:s.find(".component_content"),$component_options:s.find(".component_options"),$component_options_inner:s.find(".component_options_inner"),$component_inner:s.find(".component_inner"),$component_pagination:s.find(".component_pagination"),$component_data:t(),get_selected_product_type:function(t){return t="undefined"==typeof t?0:t,this.$component_data.eq(t).data("product_type")},get_selected_product_ids:function(){var e=this.$component_options.find("#component_options_"+this.component_id).val();return t.isArray(e)?e:[e]},is_in_stock:function(){return this.$component_summary.find(".component_wrap .out-of-stock").length>0?!1:!0},init_scripts:function(t){"undefined"==typeof t&&(t=!0),this.$component_data=this.$self.find(".component_data");var e=0;if(t){var o=this.get_selected_product_ids(),i=this.$self.find(".component_summary > .content");for(var s in o){var n=(o[s],this.get_selected_product_type(s));"variable"===n?(i.hasClass("cart")||i.addClass("cart"),i.hasClass("variations_form")||i.addClass("variations_form"),this.get_step().fire_scenario_actions(),i.wc_variation_form(),i.find(".variations select").change()):"bundle"===n?(i.hasClass("bundle_form")||i.addClass("bundle_form"),i.find(".bundle_data").wc_pb_bundle_form()):i.hasClass("cart")||i.addClass("cart"),o.length>1&&(this.$component_data.find(".price").remove(),e+=this.$component_data.eq(s).data("price"),i.find("> .price .amount").replaceWith(wc_cp_woocommerce_number_format(wc_cp_number_format(e))))}}},get_step:function(){return o.get_step(this.component_id)},get_title:function(){return this.component_title},update_filters_ui:function(){var e=this.$self.find(".component_filters"),o=e.find(".component_filter"),i=!0;return 0==o.length?!1:(o.each(function(){0==t(this).find(".component_filter_option.selected").length?t(this).removeClass("active"):(t(this).addClass("active"),i=!1)}),void(i?e.removeClass("filtered"):e.addClass("filtered")))},get_active_filters:function(){var e=this.$self.find(".component_filters"),o={};return 0==e.length?o:(e.find(".component_filter_option.selected").each(function(){var e=t(this).closest(".component_filter").data("filter_type"),i=t(this).closest(".component_filter").data("filter_id"),s=t(this).data("option_id");e in o?i in o[e]?o[e][i].push(s):(o[e][i]=[],o[e][i].push(s)):(o[e]={},o[e][i]=[],o[e][i].push(s))}),o)},reload_component_options:function(i){var s=this,n=this.$self,a=this.$component_selections,c=this.$component_options,r=this.$component_options_inner,_=this.$component_pagination,p=c.outerHeight(),l=0,d=!1;if(n.hasClass("disabled"))return!1;var m=function(){window.setTimeout(function(){d?c.animate({height:l},{duration:200,queue:!1,always:function(){c.css({height:"auto"}),a.unblock().removeClass("blocked_content refresh_component_options")}}):a.unblock().removeClass("blocked_content refresh_component_options")},250)};a.addClass("blocked_content").block(e),window.setTimeout(function(){t.post(woocommerce_params.ajax_url,i,function(e){try{if("success"===e.result){a.addClass("refresh_component_options"),c.css("height",p);var u=c.find(".component_options_select").val();r.html(t(e.options_markup).find(".component_options_inner").html());var f=r.find("img"),h=function(){if(f.length>0){var e=!1;f.each(function(){var o=t(this);return 0===o.height()?(e=!0,!1):void 0}),e?window.setTimeout(function(){h()},100):g()}else g()},g=function(){e.pagination_markup?(_.html(t(e.pagination_markup).html()),_.slideDown(200)):_.slideUp(200);var a=o.$composite_data.data("scenario_data");a.scenario_data[i.component_id]=e.component_scenario_data;var f=c.find(".component_options_select").val();u>0&&(""===f||"undefined"==typeof f)?c.find(".component_options_select").change():(s.get_step().fire_scenario_actions(),s.get_step().trigger_ui_update()),n.trigger("wc-composite-component-options-loaded"),c.css("height","auto"),l=r.outerHeight(),Math.abs(l-p)>1&&(d=!0,c.css("height",p)),m()};h()}else c.css("height",p),r.html(e.options_markup)}catch(v){console.log(v),m()}},"json")},100)},is_optional:function(){return this._is_optional},set_optional:function(t){t&&!this._is_optional?this.$component_selections.find("option.none").html(wc_composite_params.i18n_none):!t&&this._is_optional&&this.$component_selections.find("option.none").html(wc_composite_params.i18n_select_an_option),this._is_optional=t},init_qty_input:function(){("no"===wc_composite_params.is_wc_version_gte_2_3||"yes"===wc_composite_params.show_quantity_buttons)&&this.$self.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />'),this.$self.find(".component_wrap input.qty").each(function(){var e=parseFloat(t(this).attr("min"));e>=0&&parseFloat(t(this).val())<e&&t(this).val(e)})}},o.bind_component_event_handlers(o.composite_components[i])})},bind_component_event_handlers:function(o){var i=this;o.$self.on("wc-composite-component-loaded",function(){t.isFunction(t.fn.prettyPhoto)&&t(this).find('a[data-rel^="prettyPhoto"]').prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})}).on("woocommerce-product-addons-update",function(){var e=t(this).find(".addon");return 0==e.length?!1:void i.update_composite(!0)}).on("woocommerce-nyp-updated-item",function(){var e=t(this).find(".cart .nyp");e.length>0&&"variable"!==o.get_selected_product_type()&&(o.$component_data.data("price",e.data("price")),o.$component_data.data("regular_price",e.data("price")),i.update_composite(!0))}).on("woocommerce_variation_select_change",function(e){var s=o.$component_summary;i.$composite_data.find(".composite_wrap .composite_button .form_data_"+o.component_id+" .variation_input").remove(),i.$composite_data.find(".composite_wrap .composite_button .form_data_"+o.component_id+" .attribute_input").remove(),o.$component_data.data("component_set",!1),s.find(".composited_product_images").addClass("images"),t(this).find(".variations .attribute-options select").each(function(){if(""===t(this).val()){s.find('.component_wrap .single_variation input[name="variation_id"]').val("");var e=o.get_step();return i.triggered_by_step?(e=i.get_step(i.triggered_by_step),i.triggered_by_step=!1):e.fire_scenario_actions(),e.trigger_ui_update(),i.update_composite(),!1}})}).on("woocommerce_variation_select_focusin",function(t){o.get_step().fire_scenario_actions(!0)}).on("reset_image",function(t){var e=o.$component_summary;e.find(".composited_product_images").removeClass("images")}).on("found_variation",function(e,s){var n=o.$component_summary,a=i.$composite_data.find(".composite_wrap .composite_button .form_data_"+o.component_id),c='<input type="hidden" name="wccp_variation_id['+o.component_id+"]["+s.product_id+']" class="variation_input" value="'+s.variation_id+'"/>';a.append(c);for(var r in s.attributes){var _='<input type="hidden" name="wccp_'+r+"["+o.component_id+"]["+s.product_id+']" class="attribute_input" value="'+t(this).find('.variations .attribute-options select[name="'+r+'"]').val()+'"/>';a.append(_)}var p=i.$composite_data.data("price_data"),l=o.get_selected_product_ids();for(var d in l)if(s.product_id==l[d])break;1==p.per_product_pricing&&(o.$component_data.eq(d).data("price",s.price),o.$component_data.eq(d).data("regular_price",s.regular_price));var m=o.$component_data.eq(d).data("custom");m.all_prices=s.all_prices,o.$component_data.eq(d).data("custom",m),o.$component_data.eq(d).data("component_set",!0),n.find(".composited_product_images").removeClass("images"),"yes"===s.is_sold_individually&&t(this).find(".component_wrap input.qty").val("1").change(),o.get_step().fire_scenario_actions(),o.get_step().trigger_ui_update(),i.update_composite()}).on("woocommerce-composited-product-update",function(t){var e=i.$composite_data.data("price_data");if(o.get_step().trigger_ui_update(),1==e.per_product_pricing){var s=o.$component_data.data("price"),n=o.$component_data.data("regular_price");o.$component_data.data("price",s),o.$component_data.data("regular_price",n)}i.update_composite()}).on("click",".clear_component_options",function(e){if(t(this).hasClass("reset_component_options"))return!1;var i=o.$component_options.find("select.component_options_select");return o.get_step().unblock_step_inputs(),o.$self.find(".component_option_thumbnails .selected").removeClass("selected"),i.val("").change(),!1}).on("click",".reset_component_options",function(t){var e=o.get_step(),i=o.$component_options.find("select.component_options_select");return e.unblock_step_inputs(),o.$self.find(".component_option_thumbnails .selected").removeClass("selected"),e.set_active(),i.val("").change(),e.block_next_steps(),!1}).on("click",".block_component_selections_inner",function(t){var e=o.get_step();return e.block_next_steps(),e.show_step(),!1}).on("click",".component_option_thumbnail",function(e){var i=o.$self;if(i.hasClass("disabled")||t(this).hasClass("disabled"))return!0;if(t(this).blur(),!t(this).hasClass("selected")){var s=t(this).data("val");o.$component_options.find("select.component_options_select").val(s).change()}}).on("click","a.component_option_thumbnail_tap",function(e){return t(this).closest(".component_option_thumbnail").trigger("click"),!1}).on("focusin touchstart",".component_options select.component_options_select",function(t){o.get_step().fire_scenario_actions(!0)}).on("change",".component_options select.component_options_select",function(s){var n=o.component_id,a=o.$self,c=o.get_step(),r=o.$component_selections,_=o.$component_content,p=o.$component_summary,l=a.find(".component_summary > .content"),d=i.$composite_form,m=i.composite_id,u=i.$composite_data.find(".composite_wrap .composite_button .form_data_"+n),f=i.composite_layout,h="";h="paged"===f?d.find(".scroll_select_component_option"):a.next(".component");var g=p.outerHeight(),v=0,w=!1;t(this).blur(),u.find(".variation_input").remove(),u.find(".attribute_input").remove(),a.find(".component_option_thumbnails .selected").removeClass("selected disabled"),a.find("#component_option_thumbnail_"+t(this).val()).addClass("selected");var b=o.get_selected_product_ids(),y={action:"woocommerce_show_composited_product",product_id:b,component_id:n,composite_id:m,security:wc_composite_params.show_product_nonce};l.removeClass("variations_form bundle_form cart"),_.off().find("*").off(),""!==y.product_id?(r.addClass("blocked_content").block(e),i.has_transition_lock=!0,t.post(woocommerce_params.ajax_url,y,function(e){try{"yes"===e.product_data.purchasable?(_.css("height",g),l.html(e.markup),o.init_qty_input(),o.init_scripts(),c.fire_scenario_actions(),c.trigger_ui_update(),i.update_composite(),a.trigger("wc-composite-component-loaded"),_.css("height","auto"),v=p.outerHeight(),Math.abs(v-g)>1&&(w=!0,_.css("height",g))):(_.css("height",g),l.html(e.markup),o.init_scripts(!1),c.fire_scenario_actions(),c.trigger_ui_update(),i.update_summary(),i.disable_add_to_cart())}catch(s){console.log(s),_.css("height",g),l.html('<div class="component_data" data-component_set="true" data-price="0" data-regular_price="0" data-product_type="none" style="display:none;"></div>'),o.init_scripts(!1),c.fire_scenario_actions(),c.trigger_ui_update(),i.update_summary(),i.disable_add_to_cart()}window.setTimeout(function(){if(w)_.css("height","auto"),v=p.outerHeight(),Math.abs(v-g)>1&&(w=!0,_.css("height",g)),_.animate({height:v},{duration:200,queue:!1,always:function(){if(h.length>0&&!h.is_in_viewport(!0)){var e=0;e="paged"===f?h.hasClass("scroll_bottom")?t(window).height()-80:50:t(window).height()-70;var o=t("html").scrollTop(),s="body";t("html").scrollTop(t("html").scrollTop()-1),o!=t("html").scrollTop()&&(s="html"),t(s).animate({scrollTop:h.offset().top-e},{duration:200,queue:!1,always:function(){_.css({height:"auto"}),r.unblock().removeClass("blocked_content"),i.has_transition_lock=!1}})}else _.css({height:"auto"}),r.unblock().removeClass("blocked_content"),i.has_transition_lock=!1}});else if(h.length>0&&!h.is_in_viewport(!0)){var e=0;e="paged"===f?h.hasClass("scroll_bottom")?t(window).height()-80:50:t(window).height()-70;var o=t("html").scrollTop(),s="body";t("html").scrollTop(t("html").scrollTop()-1),o!=t("html").scrollTop()&&(s="html"),t(s).animate({scrollTop:h.offset().top-e},{duration:200,queue:!1,always:function(){r.unblock().removeClass("blocked_content"),i.has_transition_lock=!1}})}else r.unblock().removeClass("blocked_content"),i.has_transition_lock=!1},400)},"json")):(_.css("height",g),l.html('<div class="component_data" data-component_set="true" data-price="0" data-regular_price="0" data-product_type="none" style="display:none;"></div>'),o.init_scripts(!1),c.fire_scenario_actions(),c.trigger_ui_update(),i.update_composite(),_.animate({height:p.outerHeight()},{duration:200,queue:!1,always:function(){_.css({height:"auto"})}}))}).on("click",".component_pagination a.component_pagination_element",function(e){var s=o.$self,n=o.component_id,a=s.find(".component_ordering select"),c=parseInt(t(this).data("page_num")),r=o.get_selected_product_ids(),_=i.composite_id,p=o.get_active_filters(),l={action:"woocommerce_show_component_options",load_page:c,component_id:n,composite_id:_,selected_option:r,filters:p,security:wc_composite_params.show_product_nonce};return a.length>0&&(l.orderby=a.val()),l.load_page>0&&(t(this).blur(),o.reload_component_options(l)),!1}).on("change",".component_ordering select",function(e){var s=o.component_id,n=o.get_selected_product_ids(),a=i.composite_id,c=t(this).val(),r=o.get_active_filters(),_={action:"woocommerce_show_component_options",load_page:1,component_id:s,composite_id:a,selected_option:n,orderby:c,filters:r,security:wc_composite_params.show_product_nonce};return t(this).blur(),o.reload_component_options(_),!1}).on("click",".component_filter_option a",function(e){var s=o.$self,n=o.component_id,a=s.find(".component_ordering select"),c=t(this).closest(".component_filter_option"),r=o.get_selected_product_ids(),_=i.composite_id,p={};c.hasClass("selected")?c.removeClass("selected"):c.addClass("selected"),o.update_filters_ui(),p=o.get_active_filters();var l={action:"woocommerce_show_component_options",load_page:1,component_id:n,composite_id:_,selected_option:r,filters:p,security:wc_composite_params.show_product_nonce};return a.length>0&&(l.orderby=a.val()),t(this).blur(),o.reload_component_options(l),!1}).on("click",".component_filters a.reset_component_filters",function(e){var s=o.$self,n=o.component_id,a=s.find(".component_ordering select"),c=s.find(".component_filters .component_filter_option.selected");if(0==c.length)return!1;var r=o.get_selected_product_ids(),_=i.composite_id,p={};c.removeClass("selected"),o.update_filters_ui();var l={action:"woocommerce_show_component_options",load_page:1,component_id:n,composite_id:_,selected_option:r,filters:p,security:wc_composite_params.show_product_nonce};return a.length>0&&(l.orderby=a.val()),t(this).blur(),o.reload_component_options(l),!1}).on("click",".component_filters a.reset_component_filter",function(e){var s=o.$self,n=o.component_id,a=s.find(".component_ordering select"),c=t(this).closest(".component_filter").find(".component_filter_option.selected");if(0==c.length)return!1;var r=o.get_selected_product_ids(),_=i.composite_id,p={};c.removeClass("selected"),o.update_filters_ui(),p=o.get_active_filters();var l={action:"woocommerce_show_component_options",load_page:1,component_id:n,composite_id:_,selected_option:r,filters:p,security:wc_composite_params.show_product_nonce};return a.length>0&&(l.orderby=a.val()),t(this).blur(),o.reload_component_options(l),!1}).on("click",".component_filter_title label",function(e){var o=t(this).closest(".component_filter"),i=o.find(".component_filter_content");return wc_cp_toggle_element(o,i),t(this).blur(),!1}).on("click",".component_title",function(e){var s=o.$self,n=i.$composite_form;if(!s.hasClass("toggled")||t(this).hasClass("inactive"))return!1;if(s.hasClass("progressive")&&s.hasClass("active"))return!1;var a=o.$component_inner;return wc_cp_toggle_element(s,a)&&s.hasClass("progressive")&&s.hasClass("blocked")&&window.setTimeout(function(){n.find(".page_button.next").click()},200),t(this).blur(),!1}).on("change",".component_wrap input.qty",function(e){var o=parseFloat(t(this).attr("min")),s=parseFloat(t(this).attr("max"));o>=0&&parseFloat(t(this).val())<o&&t(this).val(o),s>0&&parseFloat(t(this).val())>s&&t(this).val(s),i.update_composite()})},init_steps:function(){var e=this;"paged"===e.composite_layout&&("componentized"===e.composite_layout_variation?(e.$composite_form.find(".multistep.active").removeClass("active"),e.$composite_data.addClass("multistep active"),e.$composite_pagination.find(".pagination_element_review").remove(),e.$composite_summary_widget.hide()):e.$composite_data.prev().hasClass("multistep")?(e.$composite_data.addClass("multistep"),e.$composite_data.hide()):e.$composite_pagination.find(".pagination_element_review").remove()),e.$composite_form.children(".component, .multistep").each(function(o){var i=t(this),s=t(this).data("item_id"),n=t(this).hasClass("component"),a=t(this).hasClass("cart");e.composite_steps[o]={step_id:s,step_index:o,step_title:i.data("nav_title"),_is_component:n,_is_review:a,$markup:i,get_title:function(){return this.step_title},get_markup:function(){return this.$markup},is_review:function(){return this._is_review},is_component:function(){return this._is_component},get_component:function(){return this._is_component?e.composite_components[this.step_index]:!1},is_current:function(){return this.$markup.hasClass("active")},is_next:function(){return this.$markup.hasClass("next")},is_previous:function(){return this.$markup.hasClass("prev")},show_step:function(){var o=this,i=e.$composite_form,s=e.composite_layout,n=e.composite_layout_variation,a=this.$markup,c=e.composite_initialized===!1?!1:!0;if("paged"===s&&c){var r=i.find(".scroll_show_component");if(r.length>0&&!r.is_in_viewport(!0)){var _=r.hasClass("scroll_bottom")?t(window).height()-80:50,p=t("html").scrollTop(),l="body";t("html").scrollTop(t("html").scrollTop()-1),p!=t("html").scrollTop()&&(l="html"),t(l).delay(20).animate({scrollTop:r.offset().top-_},{duration:250,queue:!1})}setTimeout(function(){e.$composite_summary_widget.length>0&&(o.is_review()?e.$composite_summary_widget.animate({opacity:0},{duration:250,queue:!1}):(e.$composite_summary_widget.slideDown(250),e.$composite_summary_widget.animate({opacity:1},{duration:250,queue:!1}))),o.is_review()&&e.$composite_summary_widget.slideUp(250)},20),"componentized"===n&&(o.is_review()?e.$composite_navigation.css({visibility:"hidden"}):e.$composite_navigation.css({visibility:"visible"}))}o.set_active(),o.update_block_state(),o.fire_scenario_actions(),o.trigger_ui_update(!0),"progressive"===s&&c&&a.hasClass("autoscrolled")&&setTimeout(function(){var e=a;if(e.length>0&&!a.is_in_viewport(!1)){var o=t("html").scrollTop(),i="body";t("html").scrollTop(t("html").scrollTop()-1),o!=t("html").scrollTop()&&(i="html"),t(i).animate({scrollTop:e.offset().top},{duration:250,queue:!1})}},300),a.trigger("wc-composite-show-component")},set_active:function(){var t=this,o=e.$composite_form,i=e.composite_layout,s=e.composite_layout_variation,n=e.get_current_step(),a=!1;n.step_id==t.step_id&&(a=!0),o.children(".multistep.active, .multistep.next, .multistep.prev").removeClass("active next prev"),this.get_markup().addClass("active");var c=this.get_markup().next(),r=this.get_markup().prev();"paged"===i&&"componentized"===s&&(c=o.find(".multistep.cart"),r=o.find(".multistep.cart")),c.hasClass("multistep")&&c.addClass("next"),r.hasClass("multistep")&&r.addClass("prev"),"progressive"!==i&&(a?t.get_markup().show():(e.has_transition_lock=!0,"slide"===wc_composite_params.transition_type?setTimeout(function(){var o=n.get_markup().height(),i=t.get_markup().height(),s=Math.max(o,i),a=150+Math.min(450,parseInt(s/5));n.get_markup().addClass("faded").slideUp({duration:a,always:function(){n.get_markup().removeClass("faded")}}),n.step_index<t.step_index&&(t.get_markup().after('<div style="display:none" class="active_placeholder"></div>'),t.get_markup().insertBefore(n.get_markup())),t.get_markup().slideDown({duration:a,always:function(){n.step_index<t.step_index&&e.$composite_form.find(".active_placeholder").replaceWith(t.get_markup()),e.has_transition_lock=!1}})},150):"fade"===wc_composite_params.transition_type&&(n.get_markup().addClass("faded"),t.get_markup().addClass("faded"),setTimeout(function(){t.get_markup().show(),setTimeout(function(){n.get_markup().hide(),t.get_markup().removeClass("faded")},10),e.has_transition_lock=!1},300)))),this.$markup.trigger("wc-composite-set-active-component")},update_block_state:function(){var t=e.composite_layout;if("progressive"!==t)return!1;var o=e.get_previous_step();if(o!==!1&&o.block_step_inputs(),this.unblock_step_inputs(),this.unblock_step(),o!==!1){var i=o.get_markup().find(".clear_component_options");i.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options")}},unblock_step:function(){this.$markup.hasClass("toggled")&&(this.$markup.hasClass("closed")&&wc_cp_toggle_element(this.$markup,this.$markup.find(".component_inner")),this.$markup.find(".component_title").removeClass("inactive")),this.$markup.removeClass("blocked"),this.unblock_step_inputs()},block_next_steps:function(){var o=this.step_index;t.each(e.composite_steps,function(t,e){t>o&&(e.get_markup().hasClass("disabled")&&e.unblock_step_inputs(),e.block_step())})},block_step:function(){wc_composite_params.block_components&&(this.$markup.addClass("blocked"),this.$markup.hasClass("toggled")&&(this.$markup.hasClass("open")&&wc_cp_toggle_element(this.$markup,this.$markup.find(".component_inner")),this.$markup.find(".component_title").addClass("inactive")),this.$markup.trigger("after_blocked_step"))},unblock_step_inputs:function(){this.$markup.find("select.disabled_input, input.disabled_input").removeClass("disabled_input").prop("disabled",!1),this.$markup.removeClass("disabled").trigger("wc-composite-enable-component-options");var t=this.$markup.find(".clear_component_options");t.html(wc_composite_params.i18n_clear_selection).removeClass("reset_component_options");
},block_step_inputs:function(){this.$markup.find("select, input").addClass("disabled_input").prop("disabled","disabled"),this.$markup.addClass("disabled").trigger("wc-composite-disable-component-options");var t=this.$markup.find(".clear_component_options");t.html(wc_composite_params.i18n_reset_selection).addClass("reset_component_options").trigger("after_blocked_step_inputs")},is_blocked:function(){return this.$markup.hasClass("blocked")},fire_scenario_actions:function(t){"undefined"==typeof t&&(t=!1),e.actions_nesting++,e.update_active_scenarios(this.step_id),e.update_selections(this.step_id,t),1===e.actions_nesting&&this.get_markup().trigger("wc-composite-fire-scenario-actions"),e.actions_nesting--},trigger_ui_update:function(t){"undefined"==typeof t&&(t=!1),e.update_ui(this.step_id,t)},validate_inputs:function(){if(this.is_component()){var t=this.get_component(),e=t.get_selected_product_ids(),o=!0;for(var i in e){var s=e[i],n=t.get_selected_product_type(i);s>0&&t.is_in_stock()?"variable"===n?""==t.$component_summary.find('.variations_button input[name="variation_id"]').val()&&(o=!1):"simple"===n||"none"===n||1==t.$component_data.data("component_set")||(o=!1):""===s&&t.is_optional()||(o=!1)}return o}return!1}}})},show_step:function(e){var o=this;t.each(o.composite_steps,function(t,o){return o.step_id==e?(o.show_step(),!1):void 0})},show_previous_step:function(){var e=this;t.each(e.composite_steps,function(t,e){return e.is_previous()?(e.show_step(),!1):void 0})},show_next_step:function(){var e=this;t.each(e.composite_steps,function(t,e){return e.is_next()?(e.show_step(),!1):void 0})},get_step:function(e){var o=this,i=!1;return t.each(o.composite_steps,function(t,o){return o.step_id==e?(i=o,!1):void 0}),i},get_current_step:function(){var e=this,o=!1;return t.each(e.composite_steps,function(t,e){return e.is_current()?(o=e,!1):void 0}),o},get_previous_step:function(){var e=this,o=!1;return t.each(e.composite_steps,function(t,e){return e.is_previous()?(o=e,!1):void 0}),o},get_next_step:function(){var e=this,o=!1;return t.each(e.composite_steps,function(t,e){return e.is_next()?(o=e,!1):void 0}),o},get_scenario_data:function(){var t=this,e=t.$composite_data.data("scenario_data");return e},update_active_scenarios:function(e){for(var o=this,i=o.get_step(e),s=o.composite_layout,n=i.step_index,a="",c=o.actions_nesting-1;c>0;c--)a+="	";i.is_review()&&(n=1e3);var r=o.get_scenario_data().scenarios,_=o.get_scenarios_by_type(r,"compat_group");0===_.length&&r.push("0");var p=r,l=r,d=[],m=[];"yes"===wc_composite_params.script_debug&&(console.log("\n"+a+"Selections update triggered by "+i.get_title()+" at "+(new Date).getTime().toString()+"..."),console.log("\n"+a+"Calculating active scenarios...")),t.each(o.composite_components,function(t,e){var i=e.component_id;if(("progressive"===s||"paged"===s)&&t>n)return!1;l=p.slice(),m=d.slice();var c=o.composite_steps[t].get_component().get_selected_product_ids(),r=!0;for(var _ in c){product_id=c[_];var u=e.get_selected_product_type(_);if(null!==product_id&&product_id>=0){var f=o.get_scenario_data().scenario_data,h=f[i];if(""===product_id){if(!(0 in h))break;product_id="0"}var g=h[product_id];"yes"===wc_composite_params.script_debug&&console.log(a+"Selection #"+product_id+" of "+e.get_title()+" in scenarios: "+g.toString()),d.push(i);var v=wc_cp_intersect_safe(p,g),w=v.length>0,b=!0;if(w&&"variable"===u){var y=e.$self.find('.single_variation_wrap .variations_button input[name="variation_id"]').val();if(y>0){var k=h[y];"yes"===wc_composite_params.script_debug&&console.log(a+"Variation selection #"+y+" of "+i+" in scenarios: "+g.toString()),v=wc_cp_intersect_safe(v,k),b=v.length>0}}var $=w&&b;$?(p=v,"yes"===wc_composite_params.script_debug&&console.log(a+"	Active scenarios: "+p.toString())):(w?("yes"===wc_composite_params.script_debug&&console.log(a+"	Variation selection not found in any scenario - breaking out and resetting..."),e.$self.addClass("reset_variation")):"0"!==product_id?("yes"===wc_composite_params.script_debug&&console.log(a+"	Product selection not found in any scenario - breaking out and resetting..."),e.$self.addClass("reset")):"yes"===wc_composite_params.script_debug&&console.log(a+"	Selection not found in any scenario - breaking out..."),r=!1)}}return r}),"yes"===wc_composite_params.script_debug&&console.log(a+"Removing active scenarios where all scenario shaping components are masked..."),"yes"===wc_composite_params.script_debug&&console.log(a+"	Scenario shaping components: "+d.toString()),o.active_scenarios={incl_current:o.get_binding_scenarios(p,d),excl_current:o.get_binding_scenarios(l,m)},o.$composite_data.data("active_scenarios",o.active_scenarios.incl_current),"yes"===wc_composite_params.script_debug&&console.log("\n"+a+"Final active scenarios incl.: "+o.active_scenarios.incl_current.toString()+"\n"+a+"Final active scenarios excl.: "+o.active_scenarios.excl_current.toString())},get_binding_scenarios:function(e,o){var i=this,s=i.get_scenario_data().scenario_settings.masked_components,n=[];return o.length>0?e.length>0&&t.each(e,function(e,i){var a=!0;t.each(o,function(e,o){return-1==t.inArray(o.toString(),s[i])?(a=!1,!1):void 0}),a||n.push(i)}):n=e,0===n.length&&e.length>0&&(n=e),n},get_active_scenarios_by_type:function(t){var e=this,o=e.get_scenarios_by_type(e.active_scenarios.incl_current,t),i=e.get_scenarios_by_type(e.active_scenarios.excl_current,t);return{incl_current:o,excl_current:i}},get_scenarios_by_type:function(e,o){var i=this,s=[],n="";if(e.length>0)for(var a in e)n=e[a],t.inArray(o,i.get_scenario_data().scenario_settings.scenario_actions[n])>-1&&s.push(n);return s},get_binding_scenarios_for:function(e,o){var i=this,s=i.get_scenario_data().scenario_settings.masked_components,n=[];return e.length>0&&t.each(e,function(e,i){-1==t.inArray(o.toString(),s[i])&&n.push(i)}),n},update_selections:function(e,o){for(var i=this,s=i.composite_layout,n=i.get_step(e),a=[],c=!1,r="",_=i.actions_nesting-1;_>0;_--)r+="	";if("undefined"==typeof o&&(o=!1),("progressive"===s||"paged"===s)&&(o=!0),"yes"===wc_composite_params.script_debug&&console.log("\n"+r+"Updating selections..."),"yes"===wc_composite_params.script_debug&&console.log("\n"+r+"Clearing incompatible selections..."),t.each(i.composite_components,function(o,i){var n=i.component_id,a=i.$component_options.find("select.component_options_select");if(e!=n&&"single"!==s)return!0;var _=i.get_selected_product_ids();for(var p in _){var l=_[p],d=i.get_selected_product_type(p);if(null===l&&(i.$self.addClass("reset"),"yes"===wc_composite_params.script_debug&&console.log(r+i.get_title()+" selection was found disabled.")),"yes"===wc_composite_params.is_wc_version_gte_2_3){if("variable"===d&&i.$component_content.find('.single_variation_wrap .variations_button input[name="variation_id"]').val()>0){var m=i.$component_summary.find(".attribute-options"),u=m.length;u>0&&m.each(function(){var e=t(this).find("select option:selected");return e.hasClass("enabled")?void 0:("yes"===wc_composite_params.script_debug&&console.log(r+i.get_title()+" variation selections were found disabled."),i.$self.addClass("reset_variation"),c=!0,!1)})}}else if("variable"===d){var f=i.$self.find(".component_summary > .content");if(!wc_cp_has_valid_default_attributes(f))return i.$self.addClass("reset_variation"),c=!0,!1}}if(i.$self.hasClass("reset")){if(!i.$self.hasClass("resetting"))return"yes"===wc_composite_params.script_debug&&console.log(r+"Resetting "+i.get_title()+"...\n"),i.$self.addClass("resetting"),a.val("").change(),c=!0,!1;i.$self.removeClass("reset"),i.$self.removeClass("resetting"),"yes"===wc_composite_params.script_debug&&console.log(r+"Reset "+i.get_title()+" complete...\n")}if(i.$self.hasClass("reset_variation")){if(!i.$self.hasClass("resetting"))return"yes"===wc_composite_params.script_debug&&console.log(r+"Resetting variation selections of "+i.get_title()+"...\n"),i.$self.addClass("resetting"),i.$component_summary.find(".reset_variations").trigger("click"),c=!0,!1;i.$self.removeClass("reset_variation"),i.$self.removeClass("resetting"),"yes"===wc_composite_params.script_debug&&console.log(r+"Reset "+i.get_title()+" complete...\n")}}),!c){var p=n.step_index;n.is_review()&&(p=1e3);var l=i.get_active_scenarios_by_type("compat_group");t.each(i.composite_components,function(c,_){if("progressive"==s&&n.step_index>c)return"yes"===wc_composite_params.script_debug&&console.log("breaking out of "+_.get_title()+" because firing step "+n.step_index+" is bigger than index "+c),!0;var d=_.component_id,m=_.$self.find(".component_summary > .content");a=o&&p==c?l.excl_current:l.incl_current,"yes"===wc_composite_params.script_debug&&(console.log(r+"Updating selections of "+_.get_title()+"..."),console.log(r+"	Reference scenarios: "+a.toString()),console.log(r+"	Removing any scenarios where the current component is masked...")),a=i.get_binding_scenarios_for(a,d),0===a.length&&a.push("0"),"yes"===wc_composite_params.script_debug&&console.log(r+"	Active scenarios: "+a.slice().toString());var u=i.get_scenario_data().scenario_data,f=u[d],h=!1;if(0 in f){var g=f[0];for(var v in g){var w=g[v];if(t.inArray(w,a)>-1){h=!0;break}}}else h=!1;h?("yes"===wc_composite_params.script_debug&&console.log(r+"	Component set as optional."),_.set_optional(!0)):_.set_optional(!1),_.$component_options.find("select.component_options_select option").each(function(){var e=t(this).val();if(e>=0&&""!==e){"yes"===wc_composite_params.script_debug&&console.log(r+"	Updating selection #"+e+":");var o=f[e],i=!1;"yes"===wc_composite_params.script_debug&&console.log(r+"		Selection in scenarios: "+o.toString());for(var s in o){var n=o[s];if(t.inArray(n,a)>-1){i=!0;break}}if(i)"yes"===wc_composite_params.script_debug&&console.log(r+"		Selection enabled."),t(this).prop("disabled",!1).trigger("wc-composite-selection-compatible"),_.$self.find("#component_option_thumbnail_"+t(this).val()).removeClass("disabled");else{if("yes"===wc_composite_params.script_debug&&console.log(r+"		Selection disabled."),t(this).is(":selected")){var c=t(this);t(this).parent().find("option:selected").length>1?t(this).parent().find("option:selected").each(function(e){c.val()==t(this).val()&&(_.$component_data.eq(e).remove(),t(this).prop("selected",!1).parent().trigger("change"))}):t(this).parent().find('option:selected[value=""]').length&&(_.$component_data.remove(),t(this).parent().find('option:selected[value=""]').prop("selected",!0).parent().trigger("change")),t(this).prop("selected",!1)}t(this).prop("disabled","disabled").trigger("wc-composite-selection-incompatible"),_.$self.find("#component_option_thumbnail_"+t(this).val()).addClass("disabled")}}});var b=_.get_selected_product_ids();for(var y in b){var k=(b[y],_.get_selected_product_type(y));if("variable"===k){var $=m.find('.single_variation_wrap .variations_button input[name="variation_id"]'),x=$.val(),C=x>0?!1:!0;"yes"===wc_composite_params.script_debug&&console.log(r+"		Checking variations..."),x>0&&"yes"===wc_composite_params.script_debug&&console.log(r+"			--- Stored variation is #"+x);var F=_.$component_data.eq(y).data("product_variations"),q=[];for(var y in F){var T=F[y].variation_id,S=f[T],z=!1;"yes"===wc_composite_params.script_debug&&(console.log(r+"			Checking variation #"+T+":"),console.log(r+"			Selection in scenarios: "+S.toString()));for(var I in S){var j=S[I];if(t.inArray(j,a)>-1){z=!0;break}}if("yes"===wc_composite_params.is_wc_version_gte_2_3){var A=t.extend(!0,{},F[y]),U=!1;if(z)"yes"===wc_composite_params.script_debug&&console.log(r+"			Variation enabled."),parseInt(T)===parseInt(x)&&(C=!0,"yes"===wc_composite_params.script_debug&&console.log(r+"			--- Stored variation is valid."));else{A.variation_is_active=!1;for(var D in A.attributes)if(""===A.attributes[D]){U=!0;break}"yes"===wc_composite_params.script_debug&&console.log(r+"			Variation disabled.")}U||q.push(A)}else z?(q.push(F[y]),"yes"===wc_composite_params.script_debug&&console.log(r+"			Variation enabled."),parseInt(T)===parseInt(x)&&(C=!0,"yes"===wc_composite_params.script_debug&&console.log(r+"			--- Stored variation is valid."))):"yes"===wc_composite_params.script_debug&&console.log(r+"			Variation disabled.")}m.data("product_variations",q),e!=d&&m.trigger("update_variation_values",[q]),C||("yes"===wc_composite_params.script_debug&&console.log(r+"			--- Stored variation was NOT found."),i.triggered_by_step=e,m.find(".reset_variations").trigger("click"))}}}),"yes"===wc_composite_params.script_debug&&console.log(r+"Finished updating component selections.\n\n")}},update_ui:function(t,e){var o=this,i=o.get_step(t),s=o.composite_layout;return"single"===s?!1:i.is_current()?(o.composite_initialized===!1&&(e=!1),e&&(o.has_update_nav_delay=!0),o.has_ui_update_lock===!0?!1:(o.has_ui_update_lock=!0,void setTimeout(function(){o.update_ui_task(t,o.has_update_nav_delay),o.has_ui_update_lock=!1,o.has_update_nav_delay=!1,i.get_markup().trigger("wc-composite-ui-updated")},10))):!1},update_ui_task:function(e,o){var s=this,n=s.get_step(e),a=n.get_markup(),c=s.$composite_form,r=s.$composite_navigation,_=s.composite_layout,p=s.composite_layout_variation,l=!1,d=s.get_next_step(),m=s.get_previous_step(),u=o?300:10;setTimeout(function(){if(n.validate_inputs()||"componentized"===p&&n.is_component())r.find(".next").addClass("invisible"),r.find(".prev").addClass("invisible"),d&&"componentized"!==p?(r.find(".next").html(wc_composite_params.i18n_next_step.replace("%s",d.get_title())),r.find(".next").removeClass("invisible"),d.get_markup().hasClass("toggled")&&d.get_markup().find(".component_title").removeClass("inactive")):(c.find(".composite_navigation.paged .next").html(wc_composite_params.i18n_final_step),c.find(".composite_navigation.paged .next").removeClass("invisible")),m&&m.is_component()&&(c.find(".composite_navigation.paged .prev").html(wc_composite_params.i18n_previous_step.replace("%s",m.get_title())),c.find(".composite_navigation.paged .prev").removeClass("invisible")),r.find(".prompt").html(""),r.find(".prompt").addClass("invisible"),l=!0;else{if(r.find(".prev").addClass("invisible"),r.find(".next").addClass("invisible"),d&&d.get_markup().hasClass("toggled")&&d.block_step(),m&&m.is_component()){var t=m.get_component().get_selected_product_ids();for(i in t){var e=t[i];(e>0||"0"===e||""===e&&m.get_component().is_optional())&&(c.find(".composite_navigation.paged .prev").html(wc_composite_params.i18n_previous_step.replace("%s",m.get_title())),c.find(".composite_navigation.paged .prev").removeClass("invisible"))}}n.is_component()&&(a.hasClass("last")&&a.hasClass("progressive")||(r.find(".prompt").html(wc_composite_params.i18n_select_component_options.replace("%s",n.get_title())),r.find(".prompt").removeClass("invisible")))}if("progressive"===_){var o=c.find(".composite_navigation.progressive"),s=a.find(".composite_navigation.progressive"),u=c.find(".component.next");0==s.length?(o.css({visibility:"hidden"}),o.slideUp({duration:200,queue:!1,always:function(){o.appendTo(a.find(".component_inner")).css({visibility:"visible"}),a.hasClass("last")||u.hasClass("toggled")&&l||o.slideDown(200)}})):a.hasClass("last")||u.hasClass("toggled")&&l?o.css({visibility:"hidden"}).slideUp(200):o.css({visibility:"visible"}).slideDown(200)}},u);var f=s.$composite_pagination,h=t.merge(c.find(".composite_summary"),t(".widget_composite_summary"));if(0==f.length&&0==h.length)return!1;var g=!1;t.each(s.composite_steps,function(t,e){if(t>0){var o=s.composite_steps[t-1];o.is_review()||(!1===o.validate_inputs()?g=!0:o.is_blocked()&&(g=!0))}if(f.length>0){var i=f.find(".pagination_element_"+e.step_id),n=i.find(".element_link");e.is_current()?(n.addClass("inactive"),i.addClass("pagination_element_current")):g?(n.addClass("inactive"),i.removeClass("pagination_element_current")):(n.removeClass("inactive"),i.removeClass("pagination_element_current"))}if(h.length>0){var a=h.find(".summary_element_"+e.step_id),c=a.find(".summary_element_link");e.is_current()?(c.removeClass("disabled"),c.addClass("selected"),a.find(".summary_element_selection_prompt").slideUp(200)):(a.find(".summary_element_selection_prompt").slideDown(200),g?(c.removeClass("selected"),c.addClass("disabled")):(c.removeClass("disabled"),c.removeClass("selected")))}})},update_summary:function(){var e=this,o=e.$composite_summary,i=e.$composite_data.data("price_data");if(0==o.length)return!1;t.each(e.composite_components,function(e,s){var n=s.component_id,a=s.$self,c=n,r=o.find(".summary_element_"+c),_=r.find(".summary_element_wrapper"),p=r.find(".summary_element_wrapper_inner"),l=s.get_selected_product_ids();if(o.is(":visible")){var d=p.outerHeight();_.css("height",d)}for(var m in l){var u=l[m],f=s.get_selected_product_type(),h=parseInt(a.find(".component_wrap input.qty").val()),g="",v="",w="",b="",y="",k="";if("none"===f)s.is_optional()&&(g=t("#component_options_"+c+" option.none").data("title"));else if("variable"===f)u>0&&(h>0||0===h)&&(b=t("#component_options_"+c+" option:selected").data("title"),y=" <strong>&times; "+h+"</strong>",k=wc_cp_get_variable_product_attributes_description(a.find(".variations")),k&&(k=" ("+k+")"),g=b+k+y,w=a.find(".composited_product_image img").attr("src"),"undefined"==typeof w&&(w=a.find("#component_options_"+c+" option:selected").data("image_src")));else if("bundle"===f){if(u>0&&(h>0||0===h)){var $="",x=0;a.find(".bundled_product .cart").each(function(){t(this).data("quantity")>0&&x++}),0==x?g=wc_composite_params.i18n_none:(a.find(".bundled_product .cart").each(function(){if(t(this).data("quantity")>0){var e=wc_cp_get_variable_product_attributes_description(t(this).find(".variations"));e&&(e=" ("+e+")"),$=$+t(this).data("title")+e+" <strong>&times; "+parseInt(t(this).data("quantity")*h)+"</strong></br>"}}),g=$),w=a.find("#component_options_"+c+" option:selected").data("image_src")}}else u>0&&(b=t("#component_options_"+c+" option:selected").data("title"),y=isNaN(h)?"":"<strong>&times; "+h+"</strong>",g=b+" "+y,w=a.find("#component_options_"+c+" option:selected").data("image_src"));if(v=g?a.hasClass("static")?'<a href="">'+wc_composite_params.i18n_summary_static_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_filled_component+"</a>":'<a href="">'+wc_composite_params.i18n_summary_empty_component+"</a>",g?r.find(".summary_element_selection").html('<span class="summary_element_content">'+g+'</span><span class="summary_element_content summary_element_selection_prompt">'+v+"</span>"):r.find(".summary_element_selection").html('<span class="summary_element_content summary_element_selection_prompt">'+v+"</span>"),t(this).hasClass("active")&&r.find(".summary_element_selection_prompt").hide(),wc_cp_update_summary_element_image(r,w),i.per_product_pricing===!0&&u>0&&h>0&&s.get_step().validate_inputs()){var C=(parseFloat(i.prices[c])+parseFloat(i.addons_prices[c]))*h,F=(parseFloat(i.regular_prices[c])+parseFloat(i.addons_prices[c]))*h,q=wc_cp_woocommerce_number_format(wc_cp_number_format(C)),T=wc_cp_woocommerce_number_format(wc_cp_number_format(F));F>C?r.find(".summary_element_price").html('<span class="price summary_element_content"><del>'+T+"</del> <ins>"+q+"</ins></span>"):r.find(".summary_element_price").html('<span class="price summary_element_content">'+q+"</span>")}else r.find(".summary_element_price").html("")}a.trigger("wc-composite-component-update-summary-content"),o.is(":visible")&&_.animate({height:p.outerHeight()},{duration:200,queue:!1,always:function(){_.css({height:"auto"})}})});var s=t(".widget_composite_summary_content");if(s.length>0){var n=o.find(".summary_elements").clone();n.find(".summary_element_wrapper").css({height:"auto"}),n.find(".summary_element").css({width:"100%"}),n.find(".summary_element_selection_prompt").remove(),s.html(n)}},update_composite:function(t){var e=this;return e.composite_initialized!==!0?!1:e.has_update_lock===!0?!1:(e.has_update_lock=!0,void window.setTimeout(function(){e.update_composite_task(t),e.has_update_lock=!1},50))},validate_components:function(){var e=this,o=(e.$composite_form,e.$composite_data),i=!0;return t.each(e.composite_components,function(e,s){var n=s.component_id,a=(s.$self,n),c=o.find(".composite_wrap .composite_button .form_data_"+a);s.$component_data.each(function(e,o){var r=s.get_selected_product_ids(),_=t(o).find(".component_wrap input.qty").val();for(var p in r){product_id=r[p];var l=c.find('input.variation_input[name="wccp_variation_id['+n+"]["+product_id+']"]').val(),d=s.get_selected_product_type(p);"undefined"==typeof d||""==d?i=!1:product_id>0||s.is_optional()?"none"!==d&&""===_?i=!1:"variable"!==d||"undefined"!=typeof l&&0!=s.$component_data.eq(p).data("component_set")?"variable"!==d&&"simple"!==d&&"none"!==d&&0==s.$component_data.eq(p).data("component_set")?i=!1:s.is_in_stock()||(out_of_stock.push(wc_composite_params.i18n_insufficient_item_stock.replace("%s",t("#component_options_"+a+" option:selected").data("title")).replace("%v",s.get_title())),i=!1):i=!1:i=!1}})}),i},get_components_quantity:function(){var e=this,o=(e.$composite_form,e.$composite_data),i={};return t.each(e.composite_components,function(e,s){var n=s.component_id,a=(s.$self,n);o.find(".composite_wrap .composite_button .form_data_"+a);s.$component_data.each(function(e,o){var n=s.get_selected_product_ids(),c=t(o).find(".component_wrap input.qty").val();for(var r in n)s.$component_data.eq(r).data("component_set",!0),c>0?i[a]=parseInt(c):i[a]=0})}),i},get_prices:function(){var e=this,o=(e.$composite_form,e.$composite_data),i=o.data("price_data");return i.prices_excl_tax=[],i.prices_incl_tax=[],i.addons_prices_incl_tax=[],i.addons_prices_excl_tax=[],i.regular_prices_incl_tax=[],i.regular_prices_excl_tax=[],t.each(e.composite_components,function(e,s){var n=s.component_id,a=s.$self,c=n;o.find(".composite_wrap .composite_button .form_data_"+c);i.prices[c]=0,i.prices_incl_tax[c]=0,i.prices_excl_tax[c]=0,i.addons_prices[c]=0,i.addons_prices_incl_tax[c]=0,i.addons_prices_excl_tax[c]=0,i.regular_prices[c]=0,i.regular_prices_incl_tax[c]=0,i.regular_prices_excl_tax[c]=0,a.find(".addon").each(function(){var e=0,o=0,s=0;t(this).is(".addon-custom-price")?e=o=s=t(this).val():t(this).is(".addon-input_multiplier")?(isNaN(t(this).val())||""==t(this).val()?(t(this).val(""),t(this).closest("p").find(".addon-alert").show()):(""!=t(this).val()&&t(this).val(Math.ceil(t(this).val())),t(this).closest("p").find(".addon-alert").hide()),e=t(this).data("price")*t(this).val(),o=t(this).data("price_incl_tax")*t(this).val(),s=t(this).data("price_excl_tax")*t(this).val()):t(this).is(".addon-checkbox, .addon-radio")?t(this).is(":checked")&&(e=t(this).data("price"),o=t(this).data("price_incl_tax"),s=t(this).data("price_excl_tax")):t(this).is(".addon-select")?t(this).val()&&(e=t(this).find("option:selected").data("price"),o=t(this).find("option:selected").data("price_incl_tax"),s=t(this).find("option:selected").data("price_excl_tax")):t(this).val()&&(e=t(this).data("price"),o=t(this).data("price_incl_tax"),s=t(this).data("price_excl_tax")),e||(e=0,o=0,s=0),i.addons_prices[c]=parseFloat(i.addons_prices[c])+parseFloat(e),i.addons_prices_incl_tax[c]=parseFloat(i.addons_prices_incl_tax[c])+parseFloat(o),i.addons_prices_excl_tax[c]=parseFloat(i.addons_prices_excl_tax[c])+parseFloat(s)}),s.$component_data.each(function(e,o){i.prices[c]+=parseFloat(t(this).data("price")),i.regular_prices[c]+=parseFloat(t(this).data("regular_price"));var s=t.isArray(t(this).data("custom"))?t.extend({},t(this).data("custom")):t(this).data("custom");"undefined"==typeof s||t.isEmptyObject(s)||(i.prices_incl_tax[c]+=parseFloat(s.all_prices.price.incl),i.prices_excl_tax[c]+=parseFloat(s.all_prices.price.excl),i.regular_prices_incl_tax[c]+=parseFloat(s.all_prices.regular_price.incl),i.regular_prices_excl_tax[c]+=parseFloat(s.all_prices.regular_price.excl))})}),i},update_composite_task:function(e){var o=this,i=o.$composite_form,s=o.$composite_data;"undefined"==typeof e&&(e=!1);var n=this.validate_components(),a=this.get_components_quantity(),c=this.get_prices(),r=[],_=s.data("progression_style"),p=o.composite_layout,l=s.find(".composite_wrap p.stock");if(o.composite_stock_status!==!1?l.replaceWith(t(o.composite_stock_status)):l.remove(),("progressive"===p||"paged"===p)&&"strict"===_&&!i.find(".multistep").last().hasClass("active"))return o.disable_add_to_cart(),!1;if(o.update_summary(),n){if(0==c.per_product_pricing&&1==c.price_undefined)return o.disable_add_to_cart(wc_composite_params.i18n_unavailable_text),!1;if(1==c.per_product_pricing){c.total=0,c.total_incl_tax=0,c.total_excl_tax=0,c.regular_total=0,c.regular_total_incl_tax=0,c.regular_total_excl_tax=0;for(var d in c.prices)c.total+=(parseFloat(c.prices[d])+parseFloat(c.addons_prices[d]))*a[d],c.total_incl_tax+=(parseFloat(c.prices_incl_tax[d])+parseFloat(c.addons_prices_incl_tax[d]))*a[d],c.total_excl_tax+=(parseFloat(c.prices_excl_tax[d])+parseFloat(c.addons_prices_excl_tax[d]))*a[d],c.regular_total+=(parseFloat(c.regular_prices[d])+parseFloat(c.addons_prices[d]))*a[d],c.regular_total_incl_tax+=(parseFloat(c.regular_prices_incl_tax[d])+parseFloat(c.addons_prices_incl_tax[d]))*a[d],c.regular_total_excl_tax+=(parseFloat(c.regular_prices_excl_tax[d])+parseFloat(c.addons_prices_excl_tax[d]))*a[d];c.total+=parseFloat(c.base_price),c.total_incl_tax+=parseFloat(c.base_price_incl_tax),c.total_excl_tax+=parseFloat(c.base_price_excl_tax),c.regular_total+=parseFloat(c.base_regular_price),c.regular_total_incl_tax+=parseFloat(c.base_regular_price_incl_tax),c.regular_total_excl_tax+=parseFloat(c.base_regular_price_excl_tax)}else{c.total=parseFloat(c.base_price),c.total_incl_tax=parseFloat(c.base_price_incl_tax),c.total_excl_tax=parseFloat(c.base_price_excl_tax),c.regular_total=parseFloat(c.base_regular_price),c.regular_total_incl_tax=parseFloat(c.base_regular_price_incl_tax),c.regular_total_excl_tax=parseFloat(c.base_regular_price_excl_tax);for(var m in c.addons_prices)c.total+=parseFloat(c.addons_prices[m])*a[m],c.total_incl_tax=parseFloat(c.addons_prices_incl_tax[m])*a[m],c.total_excl_tax=parseFloat(c.addons_prices_excl_tax[m])*a[m],c.regular_total+=parseFloat(c.addons_prices[m])*a[m],c.regular_total_incl_tax+=parseFloat(c.addons_prices_incl_tax[m])*a[m],c.regular_total_excl_tax+=parseFloat(c.addons_prices_excl_tax[m])*a[m]}var u=s.find("#product-addons-total");if(u.length>0&&(u.data("price",c.total),s.trigger("woocommerce-product-addons-update")),0==c.total&&1==c.show_free_string)s.find(".composite_price").html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+wc_composite_params.i18n_free+"</p>");else{var f=wc_cp_woocommerce_number_format(wc_cp_number_format(c.total)),h=wc_cp_woocommerce_number_format(wc_cp_number_format(c.regular_total));c.regular_total>c.total?s.find(".composite_price").html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span><del>"+h+"</del> <ins>"+f+"</ins></p>"):s.find(".composite_price").html('<p class="price"><span class="total">'+wc_composite_params.i18n_total+"</span>"+f+"</p>")}var g=s.data("button_behaviour");"new"!==g?s.find(".composite_wrap").slideDown(200):s.find(".composite_button button").prop("disabled",!1).removeClass("disabled"),s.find(".composite_wrap").trigger("wc-composite-show-add-to-cart")}else{if(r.length>0){var v='<p class="stock out-of-stock">'+wc_composite_params.i18n_insufficient_stock+"</p>",w=0,b="";for(var y in r)w++,b=1==r.length||1==w?r[y]:wc_composite_params.i18n_insufficient_item_stock_comma_sep.replace("%s",b).replace("%v",r[y]);s.find(".composite_wrap p.stock").length>0?s.find(".composite_wrap p.stock").replaceWith(t(v.replace("%s",b))):s.find(".composite_wrap .composite_price").after(t(v.replace("%s",b)))}e||o.disable_add_to_cart()}var k=t(".widget_composite_summary_content");if(k.length>0){var $=s.find(".composite_wrap .composite_price").clone();k.append($.addClass("cp_clearfix"))}},disable_add_to_cart:function(t){var e=this,o=e.$composite_data,i=o.data("button_behaviour");if("new"===i){if("undefined"==typeof t){var s=e.get_pending_components_string();t=s?wc_composite_params.i18n_select_options.replace("%s",s):""}o.find(".composite_price").html(t),o.find(".composite_button button").prop("disabled",!0).addClass("disabled")}else o.find(".composite_price").html(""),o.find(".composite_wrap").slideUp(200);o.find(".composite_wrap").trigger("wc-composite-hide-add-to-cart")},get_pending_components:function(){var e=this,o=e.$composite_data,s=[],n=o.data("progression_style");return t.each(e.composite_components,function(t,e){var o=e.get_selected_product_ids();for(i in o){var a=parseInt(o[i]),c=e.$component_data.eq(i).data("component_set");(!(a>0)&&!e.is_optional()||"strict"===n&&e.$self.hasClass("blocked")||0==c||"undefined"==typeof c)&&s.push(e.get_title())}}),s},get_active_components:function(){var e=this,o=e.$composite_data,s=[],n=o.data("progression_style");return t.each(e.composite_components,function(t,e){var o=e.get_selected_product_ids();for(i in o){var a=parseInt(o[i]),c=e.$component_data.eq(i).data("component_set");!(a>0)&&!e.is_optional()||"strict"===n&&e.$self.hasClass("blocked")||0==c||"undefined"==typeof c||s.push(e.get_title())}}),s},get_active_components_products:function(){var e=this,o=e.$composite_data,s={};o.data("progression_style");return t.each(e.composite_components,function(e,o){var n=o.get_selected_product_ids();s[o.get_title()]=[];for(i in n){var a=parseInt(n[i]);if(null!==a&&a>0){var c=o.$component_data.eq(i).data("component_set");if(1==c&&"undefined"!=typeof c){var r=t.trim(o.$self.find('.component_options_select option:selected[value="'+a+'"]').data("title"));s[o.get_title()].push({id:a,title:r})}}}}),s},get_pending_components_string:function(){var t=this.get_pending_components(),e=t.length,o="";if(e>0){var i=0;for(var s in t)i++,o=1==e||1==i?"&quot;"+t[s]+"&quot;":i==e?wc_composite_params.i18n_select_options_and_sep.replace("%s",o).replace("%v",t[s]):wc_composite_params.i18n_select_options_comma_sep.replace("%s",o).replace("%v",t[s])}return o}},wc_cp_composite_scripts[s].init(),t(this).trigger("wc-composite-after-initialized")},t.fn.is_in_viewport=function(e,o,i){var s=t(window);if(!(this.length<1)){var n=this.length>1?this.eq(0):this,a=n.get(0),c=s.width(),r=s.height(),i=i?i:"both",_=o===!0?a.offsetWidth*a.offsetHeight:!0;if("function"==typeof a.getBoundingClientRect){var p=a.getBoundingClientRect(),l=p.top>=0&&p.top<r,d=p.bottom>0&&p.bottom<=r,m=p.left>=0&&p.left<c,u=p.right>0&&p.right<=c,f=e?l||d:l&&d,h=e?m||u:m&&u;if("both"===i)return _&&f&&h;if("vertical"===i)return _&&f;if("horizontal"===i)return _&&h}else{var g=s.scrollTop(),v=g+r,w=s.scrollLeft(),b=w+c,y=n.offset(),k=y.top,$=k+n.height(),x=y.left,C=x+n.width(),F=e===!0?$:k,q=e===!0?k:$,T=e===!0?C:x,S=e===!0?x:C;if("both"===i)return!!_&&v>=q&&F>=g&&b>=S&&T>=w;if("vertical"===i)return!!_&&v>=q&&F>=g;if("horizontal"===i)return!!_&&b>=S&&T>=w}}},t(".composite_form .composite_data").each(function(){t(this).wc_composite_form()})}),jQuery(document).ready(function(t){var e={message:null,overlayCSS:{backgroundColor:"#fff",opacity:.6,cursor:"not-allowed"}};for(var o in wc_cp_composite_scripts){var i=wc_cp_composite_scripts[o];i.$composite_data.data("sku",wc_composite_ext_product_data.sku),i.$composite_data.data("weight",wc_composite_ext_product_data.weight),i.$composite_form.bind("wc-composite-hide-add-to-cart",function(){i.$composite_data.find(".composite_sku").text("")}).bind("wc-composite-show-add-to-cart",function(){var t=wc_cp_ext_get_sku(i.$composite_form);i.$composite_data.data("sku",t)}).bind("wc-composite-calculate-weight",function(){var t=wc_cp_ext_get_weight(i.$composite_form);i.$composite_data.data("weight",t)}).trigger("wc-composite-calculate-weight"),i.$components.on("change",".component_options_radio",function(e){var o=t(this).closest(".component");if(o.hasClass("disabled")||t(this).hasClass("disabled"))return!0;t(this).blur();var i=t(this).val(),s=t(this).closest(".component_options").find("select.component_options_select");s.val()!=i&&(s.val(i).trigger("change").trigger("focusin"),t(".component").trigger("woocommerce_variation_select_focusin"));
}).on("change",".component_options_checkbox",function(e){var o=t(this).closest(".component");if(o.hasClass("disabled")||t(this).hasClass("disabled"))return!0;t(this).blur();var i=[];t(this).parents(".component_options").find("input.component_options_checkbox:checked").each(function(){i.push(t(this).val())}),0===i.length&&i.push("");var s=t(this).closest(".component_options").find("select.component_options_select");s.val()!=i&&(s.val(i).trigger("change").trigger("focusin"),t(".component").trigger("woocommerce_variation_select_focusin"))}).on("change",".component_options_select",function(e){var o=t.isArray(t(this).val())?t(this).val():[t(this).val()];if(o){for(var s=t(this).siblings("ul.component_options_radios, ul.component_options_checkboxes"),n=!1,a=0;a<o.length;a++)if(value=o[a],value){n=!0;var c=s.find('input[type="radio"][value="'+value+'"], input[type="checkbox"][value="'+value+'"]');c.is(":checked")||t(c).prop("checked",!0)}n||(s.find('input[type="radio"]:not(.none), input[type="checkbox"]').prop("checked",!1),t(this).find("option").eq(0).prop("selected",!0))}i.$composite_form.trigger("wc-composite-calculate-weight")}).trigger("woocommerce_variation_select_focusin").find(".component_options_select option").bind("wc-composite-selection-incompatible",function(){var o=t(this).val(),i=t(this).parent("select"),s=t(i).siblings("ul.component_options_radios, ul.component_options_checkboxes"),n=s.find('input[type="radio"][value="'+o+'"], input[type="checkbox"][value="'+o+'"]');n.prop("checked",!1).parents("li").block(e).find(".blockOverlay").removeClass("blockOverlay")}).bind("wc-composite-selection-compatible",function(){var e=t(this).val(),o=t(this).parent("select"),i=t(o).siblings("ul.component_options_radios, ul.component_options_checkbox"),s=i.find('input[type="radio"][value="'+e+'"], input[type="checkbox"][value="'+e+'"]');s.parents("li").unblock()})}});